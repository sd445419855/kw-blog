<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>部署 Cordova 所需的工具、环境的详细说明</title>
    
<style id="wiz_code_style">.wiz-editor-body .wiz-code-container{position: relative; padding:8px 0; margin: 5px 0;text-indent:0; text-align:left;}.CodeMirror {font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace; color: black; font-size: 10.5pt; font-size: 0.875rem}.wiz-editor-body .wiz-code-container .CodeMirror div {margin-top: 0; margin-bottom: 0;}.CodeMirror-lines {padding: 4px 0;}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {padding: 0 4px;}.CodeMirror pre.CodeMirror-line {min-height: 24px;}.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {background-color: white;}.CodeMirror-gutters {border-right: 1px solid #ddd; background-color: #f7f7f7; white-space: nowrap;}.CodeMirror-linenumbers {}.CodeMirror-linenumber {padding: 0 3px 0 5px; min-width: 20px; text-align: right; color: #999; white-space: nowrap;}.CodeMirror-guttermarker {color: black;}.CodeMirror-guttermarker-subtle {color: #999;}.CodeMirror-cursor {border-left: 1px solid black; border-right: none; width: 0;}.CodeMirror div.CodeMirror-secondarycursor {border-left: 1px solid silver;}.cm-fat-cursor .CodeMirror-cursor {width: auto; border: 0 !important; background: #7e7;}.cm-fat-cursor div.CodeMirror-cursors {z-index: 1;}.cm-fat-cursor-mark {background-color: rgba(20, 255, 20, 0.5);-webkit-animation: blink 1.06s steps(1) infinite;-moz-animation: blink 1.06s steps(1) infinite;animation: blink 1.06s steps(1) infinite;}.cm-animate-fat-cursor {width: auto; border: 0; -webkit-animation: blink 1.06s steps(1) infinite; -moz-animation: blink 1.06s steps(1) infinite; animation: blink 1.06s steps(1) infinite; background-color: #7e7;}@-moz-keyframes blink {  0% {}  50% { background-color: transparent; }  100% {}}@-webkit-keyframes blink {  0% {}  50% { background-color: transparent; }  100% {}}@keyframes blink {  0% {}  50% { background-color: transparent; }  100% {}}.CodeMirror-overwrite .CodeMirror-cursor {}.cm-tab { display: inline-block; text-decoration: inherit; }.CodeMirror-rulers {position: absolute; left: 0; right: 0; top: -50px; bottom: -20px; overflow: hidden;}.CodeMirror-ruler {border-left: 1px solid #ccc; top: 0; bottom: 0; position: absolute;}.cm-s-default .cm-header {color: blue;}.cm-s-default .cm-quote {color: #090;}.cm-negative {color: #d44;}.cm-positive {color: #292;}.cm-header, .cm-strong {font-weight: bold;}.cm-em {font-style: italic;}.cm-link {text-decoration: underline;}.cm-strikethrough {text-decoration: line-through;}.cm-s-default .cm-keyword {color: #708;}.cm-s-default .cm-atom {color: #219;}.cm-s-default .cm-number {color: #164;}.cm-s-default .cm-def {color: #00f;}.cm-s-default .cm-variable,.cm-s-default .cm-punctuation,.cm-s-default .cm-property,.cm-s-default .cm-operator {}.cm-s-default .cm-variable-2 {color: #05a;}.cm-s-default .cm-variable-3 {color: #085;}.cm-s-default .cm-comment {color: #a50;}.cm-s-default .cm-string {color: #a11;}.cm-s-default .cm-string-2 {color: #f50;}.cm-s-default .cm-meta {color: #555;}.cm-s-default .cm-qualifier {color: #555;}.cm-s-default .cm-builtin {color: #30a;}.cm-s-default .cm-bracket {color: #997;}.cm-s-default .cm-tag {color: #170;}.cm-s-default .cm-attribute {color: #00c;}.cm-s-default .cm-hr {color: #999;}.cm-s-default .cm-link {color: #00c;}.cm-s-default .cm-error {color: #f00;}.cm-invalidchar {color: #f00;}.CodeMirror-composing { border-bottom: 2px solid; }div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }.CodeMirror-activeline-background {background: #e8f2ff;}.CodeMirror {position: relative; background: #f5f5f5;}.CodeMirror-scroll {overflow: hidden !important; margin-bottom: 0; margin-right: -30px; padding: 16px 30px 16px 0; outline: none; position: relative;}.CodeMirror-sizer {position: relative; border-right: 30px solid transparent;}.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {position: absolute; z-index: 6; display: none;}.CodeMirror-vscrollbar {right: 0; top: 0; overflow-x: hidden; overflow-y: scroll;}.CodeMirror-hscrollbar {bottom: 0; left: 0 !important; overflow-y: hidden; overflow-x: scroll;pointer-events: auto !important;outline: none;}.CodeMirror-scrollbar-filler {right: 0; bottom: 0;}.CodeMirror-gutter-filler {left: 0; bottom: 0;}.CodeMirror-gutters {position: absolute; left: 0; top: 0; min-height: 100%; z-index: 3;}.CodeMirror-gutter {white-space: normal; height: 100%; display: inline-block; vertical-align: top; margin-bottom: -30px;}.CodeMirror-gutter-wrapper {position: absolute; z-index: 4; background: none !important; border: none !important;}.CodeMirror-gutter-background {position: absolute; top: 0; bottom: 0; z-index: 4;}.CodeMirror-gutter-elt {position: absolute; cursor: default; z-index: 4;}.CodeMirror-gutter-wrapper ::selection { background-color: transparent }.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }.CodeMirror-lines {cursor: text; min-height: 1px;}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like {-moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0; border-width: 0; background: transparent; font-family: inherit; font-size: inherit; margin: 0; white-space: pre; word-wrap: normal; line-height: inherit; color: inherit; z-index: 2; position: relative; overflow: visible; -webkit-tap-highlight-color: transparent; -webkit-font-variant-ligatures: contextual; font-variant-ligatures: contextual;}.CodeMirror-wrap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like {word-wrap: break-word; white-space: pre-wrap; word-break: normal;}.CodeMirror-linebackground {position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: 0;}.CodeMirror-linewidget {position: relative; z-index: 2; padding: 0.1px;}.CodeMirror-widget {}.CodeMirror-rtl pre { direction: rtl; }.CodeMirror-code {outline: none;}.CodeMirror-scroll,.CodeMirror-sizer,.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber {-moz-box-sizing: content-box; box-sizing: content-box;}.CodeMirror-measure {position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;}.CodeMirror-cursor {position: absolute; pointer-events: none;}.CodeMirror-measure pre { position: static; }div.CodeMirror-cursors {visibility: hidden; position: relative; z-index: 3;}div.CodeMirror-dragcursors {visibility: visible;}.CodeMirror-focused div.CodeMirror-cursors {visibility: visible;}.CodeMirror-selected { background: #d9d9d9; }.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }.CodeMirror-crosshair { cursor: crosshair; }.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }.cm-searching {background: #ffa; background: rgba(255, 255, 0, .4);}.cm-force-border { padding-right: .1px; }@media print {  .CodeMirror div.CodeMirror-cursors {visibility: hidden;}}.cm-tab-wrap-hack:after { content: ""; }span.CodeMirror-selectedtext { background: none; }.CodeMirror-activeline-background, .CodeMirror-selected {transition: visibility 0ms 100ms;}.CodeMirror-blur .CodeMirror-activeline-background, .CodeMirror-blur .CodeMirror-selected {visibility:hidden;}.CodeMirror-blur .CodeMirror-matchingbracket {color:inherit !important;outline:none !important;text-decoration:none !important;}.CodeMirror-sizer {min-height:auto !important;}</style><style name="wiz_code_style" id="wiz_code_style-eclipse">.cm-s-eclipse span.cm-meta { color: #FF1717; }.cm-s-eclipse span.cm-keyword { line-height: 1em; font-weight: bold; color: #7F0055; }.cm-s-eclipse span.cm-atom { color: #219; }.cm-s-eclipse span.cm-number { color: #164; }.cm-s-eclipse span.cm-def { color: #00f; }.cm-s-eclipse span.cm-variable { color: black; }.cm-s-eclipse span.cm-variable-2 { color: #0000C0; }.cm-s-eclipse span.cm-variable-3 { color: #0000C0; }.cm-s-eclipse span.cm-property { color: black; }.cm-s-eclipse span.cm-operator { color: black; }.cm-s-eclipse span.cm-comment { color: #3F7F5F; }.cm-s-eclipse span.cm-string { color: #2A00FF; }.cm-s-eclipse span.cm-string-2 { color: #f50; }.cm-s-eclipse span.cm-qualifier { color: #555; }.cm-s-eclipse span.cm-builtin { color: #30a; }.cm-s-eclipse span.cm-bracket { color: #cc7; }.cm-s-eclipse span.cm-tag { color: #170; }.cm-s-eclipse span.cm-attribute { color: #00c; }.cm-s-eclipse span.cm-link { color: #219; }.cm-s-eclipse span.cm-error { color: #f00; }.cm-s-eclipse .CodeMirror-activeline-background { background: #e8f2ff; }.cm-s-eclipse .CodeMirror-matchingbracket { outline:1px solid grey; color:black !important; }</style><style id="wiz_custom_css">html, .wiz-editor-body {font-size: 12pt;}.wiz-editor-body {font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;line-height: 1.7;margin: 0 auto;position:relative;padding: 20px 16px;}.wiz-editor-body h1,.wiz-editor-body h2,.wiz-editor-body h3,.wiz-editor-body h4,.wiz-editor-body h5,.wiz-editor-body h6 {margin:20px 0 10px;margin:1.25rem 0 0.625rem;padding: 0;font-weight: bold;}.wiz-editor-body h1 {font-size:20pt;font-size:1.67rem;}.wiz-editor-body h2 {font-size:18pt;font-size:1.5rem;}.wiz-editor-body h3 {font-size:15pt;font-size:1.25rem;}.wiz-editor-body h4 {font-size:14pt;font-size:1.17rem;}.wiz-editor-body h5 {font-size:12pt;font-size:1rem;}.wiz-editor-body h6 {font-size:12pt;font-size:1rem;color: #777777;margin: 1rem 0;}.wiz-editor-body div,.wiz-editor-body p,.wiz-editor-body ul,.wiz-editor-body ol,.wiz-editor-body dl,.wiz-editor-body li {margin:8px 0 0;}.wiz-editor-body blockquote,.wiz-editor-body table,.wiz-editor-body pre,.wiz-editor-body code {margin:8px 0;}.wiz-editor-body .CodeMirror pre {margin:0;}.wiz-editor-body a {word-wrap: break-word;text-decoration-skip-ink: none;}.wiz-editor-body ul,.wiz-editor-body ol {padding-left:32px;padding-left:2rem;}.wiz-editor-body ol.wiz-list-level1 > li {list-style-type:decimal;}.wiz-editor-body ol.wiz-list-level2 > li {list-style-type:lower-latin;}.wiz-editor-body ol.wiz-list-level3 > li {list-style-type:lower-roman;}.wiz-editor-body li.wiz-list-align-style {list-style-position: inside; margin-left: -1em;}.wiz-editor-body blockquote {padding: 0 12px;}.wiz-editor-body blockquote > :first-child {margin-top:0;}.wiz-editor-body blockquote > :last-child {margin-bottom:0;}.wiz-editor-body img {border:0;max-width:100%;height:auto !important;margin:2px 0;padding: 2px;vertical-align:bottom;}.wiz-editor-body table {border-collapse:collapse;border:1px solid #a7afbc;}.wiz-editor-body td,.wiz-editor-body th {padding:4px 8px;border-collapse:collapse;border:1px solid #a7afbc;min-height:28px;word-break:break-word;box-sizing: border-box;}.wiz-editor-body td > div:first-child {margin-top:0;}.wiz-editor-body td > div:last-child {margin-bottom:0;}.wiz-editor-body img.wiz-svg-image {box-shadow:1px 1px 4px #E8E8E8;}.wiz-editor-body .wiz-image-container {margin:0;max-width: 100%;display: inline-flex;flex-direction: column;}.wiz-editor-body .wiz-image-container .wiz-image-title {display:inline-block;text-align: center;color: #a7afbc;line-height: 18px;font-size: 12px;min-height: 18px;width: 100%;white-space: normal;}.wiz-hide {display:none !important;}.wiz-editor-body.wiz-editor-outline {padding-right:0; padding-left:0;}.wiz-editor-body.wiz-editor-outline .outline-container {margin:0; padding:0; line-height:1.5;}.wiz-editor-body.wiz-editor-outline .outline-container div {margin:0;}.wiz-editor-body.wiz-editor-outline .node {margin:0; padding: 0;}.wiz-editor-body.wiz-editor-outline .outline-container > .node {margin-right:24px; margin-left:30px;}.wiz-editor-body.wiz-editor-outline .node.collapsed .children {display:none;}.wiz-editor-body.wiz-editor-outline .node .row {position:relative; padding-left:26px;}.wiz-editor-body.wiz-editor-outline .node .operator-container {width:36px;position:absolute; top:4px; left:-18px;}.wiz-editor-body.wiz-editor-outline .node .operator-bar {position:absolute; top:0; left:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center;}.wiz-editor-body.wiz-editor-outline .node .switch {width:18px; height:18px;display:flex;flex-direction: column;align-items: center;overflow: hidden;}.wiz-editor-body.wiz-editor-outline .node .switch i {font-size:20px;position:relative;left:-1px;top:-1px;}.wiz-editor-body.wiz-editor-outline .node .switch.active {cursor:pointer;color:transparent; transition:transform 200ms ease 0s;}.wiz-editor-body.wiz-editor-outline .node.collapsed .switch.active {transform:rotateZ(-90deg);}.wiz-editor-body.wiz-editor-outline .node .row:hover .switch.active {color:#505F79}.wiz-editor-body.wiz-editor-outline .node .dot {display:flex; align-items:center; justify-content:center; border-radius:100%; width:18px; height:18px;}.wiz-editor-body.wiz-editor-outline .node.collapsed .dot {background-color:rgba(80, 95, 121, .15);}.wiz-editor-body.wiz-editor-outline .node .dot-icon {background-color:#505F79; border-radius:100%; width:6px; height:6px;}.wiz-editor-body.wiz-editor-outline .node .child {margin-left:8px; border-left:1px solid #E6E9ED; padding-left:17px;}.wiz-editor-body.wiz-editor-outline .node .content {flex:1;outline:none; padding:4px 0;}.wiz-editor-body.wiz-editor-outline .node div.content {font-size:1rem;}.wiz-editor-body.wiz-editor-outline .node.complete > .row .content {text-decoration:line-through;color:#A7AFBC;}.wiz-editor-body.wiz-editor-outline .node .notes {outline:none; font-size:.8rem; color:#A7AFBC;}.wiz-editor-body.wiz-editor-outline .node .image {outline:none; padding-top:4px; padding-bottom:4px;}.wiz-editor-body.wiz-editor-outline .outline-container h1,.wiz-editor-body.wiz-editor-outline .outline-container h2,.wiz-editor-body.wiz-editor-outline .outline-container h3,.wiz-editor-body.wiz-editor-outline .outline-container h4,.wiz-editor-body.wiz-editor-outline .outline-container h5,.wiz-editor-body.wiz-editor-outline .outline-container h6 {margin:0;}body, .wiz-editor-body {  padding-left: 48px;  padding-right: 48px;}</style></head>

<body onload="parent.window.document.all.dd.height=document.body.scrollHeight" class="wiz-editor-body " data-wiz-document-type="common" spellcheck="false" style="opacity: 1;" ><div style="text-align: center;"><span style="font-size:1.667rem" data-wiz-span="data-wiz-span"><b></b></span></div><div><span><br></span></div><div><span><br></span></div><div><span><br></span></div><div><span><b style="background-color:rgb(0, 147, 0);color:rgb(255, 255, 255)">Tips：</b></span></div><blockquote style=""><div><span style="background-color: rgb(0, 147, 0); color: rgb(255, 255, 255);" data-wiz-span="data-wiz-span">该笔记记录了环境变量的设置、打包环境的细节、打包的具体操作。&nbsp;</span></div></blockquote><div><span><br></span></div><div><span><br></span></div><h1><span>Android SDK 的安装与配置</span></h1><div><hr><br></div><div><br></div><div><br></div><h2><span><b>下载与安装：</b></span></h2><hr><blockquote><div><span>这里主要讲最常用的方法二——使用</span><span>图形界面 SDK Manager<span>&nbsp;下载、安装 SDK 相关软件包。</span></span></div></blockquote><div><span><br></span></div><div><span>首先，下载带有图形界面 SDK Manager 的 SDK Tools 软件包。</span></div><div><span>打开下载网站<a href="https://www.androiddevtools.cn/" style="text-decoration-skip-ink: none;">《<span style="color:rgb(0, 0, 0);">androiddevtools - AndroidDevTools</span>》</a></span></div><div><span>选择“<span data-wiz-span="data-wiz-span" style="background-color: rgb(127, 127, 127); color: rgb(255, 255, 255);">Android SDK 工具 / SDK Tools / android-sdk_r24.4.1-windows.zip</span>”，下载该压缩包，如下图</span></div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/62e90e3c-b0d0-4821-ad3b-3a1a02b7a21e.png"></div><div><br></div></div><div><span>把 SDK Tools 压缩包解压到电脑上位置任意，如下图：</span></div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/219608f7-cc24-45bd-b651-1e7b04517267.png"></div><div><br></div></div><div><span>打开 SDK Tools 软件包 Home 目录的 SDK Manager，如下图：</span></div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/f011e99c-8d1f-467d-9d6e-2a18c9381371.png"></div><div><br></div></div><div>设置可科学上网的代理，勾选强制 Https 转为 Http，如下图：</div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/3da04bd9-4f7c-4483-b78c-a464fa196c91.png"></div><div><br></div></div><div>回到 SDK Manager 主页面，在 Tools、API、Extras 目录下中选择需要的软件包进行下载安装。</div><div><span>具体选取方案往下看。</span></div><div><br></div><div><span><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">Ref</span>：</b></span></div><blockquote><div><span><div><a href="https://zhuanlan.zhihu.com/p/37974829" style="text-decoration-skip-ink:none;">《知乎 -&nbsp;<span style="color:rgb(0, 0, 0);">Android SDK下载安装及配置教程》</span></a></div></span></div><div><span><div><a href="https://blog.csdn.net/zeternityyt/article/details/79655150" style="text-decoration-skip-ink:none;">《csdn -&nbsp;<span style="color:rgb(0, 0, 0);">android SDK安装以及环境变量配置（windows）</span>》</a></div></span></div><div><span><div><a href="https://www.cnblogs.com/nebie/p/9145627.html" style="text-decoration-skip-ink:none;">《cnblogs - Android SDK的下载与安装》</a><span>（对上面文章的补充）</span></div></span></div><div><span><div><a href="https://www.androiddevtools.cn/" style="text-decoration-skip-ink:none;">《<span style="color:rgb(0, 0, 0);">androiddevtools - AndroidDevTools</span>》</a></div></span></div></blockquote><div><span><br></span></div><div><br></div><div><br></div><div><br></div><div><span><br></span></div><h2><span>Tools、API、Extras 软件包的选取方案：</span></h2><hr><div><br></div><div><b style="font-size:1.063rem"><span data-wiz-span="data-wiz-span" style="font-size: 1.125rem;">我当前的选择：</span></b></div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/34389156.png"></div><div style="text-align: center;">图 1 - 我的 Tools、API、Extras 软件包的选取方案</div><div><br></div></div><div><b style="font-size:1.063rem"><span data-wiz-span="data-wiz-span" style="font-size: 1.125rem;">博客园大神的建议：</span></b></div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/0.029190389001701397.png"></div><div style="text-align: center;"><span>图 1 - 博客园大神的 Tools、API、Extras 软件包的选取方案</span></div><div><br></div><div><br></div><div><div><span data-wiz-span="data-wiz-span" style="background-color: rgb(0, 147, 0); color: rgb(255, 255, 255);">Tips：如果没看到 Tools 下的 SDK Tools，那说明它在更新后变成“Obsolete”状态的了，需要勾选“Show Obsolete Packages”才会显示。&nbsp;</span></div></div><blockquote><div><div>（obsolete：废弃、过时、被淘汰的 美 [ˌɑːbsəˈliːt]&nbsp; ）</div></div><div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/ce4e7979-ec91-4969-b58a-9ba279e69f92.png"></div></div></div><div><div><div><br></div></div></div><div><div><span>为什么会这样呢？因为它现在已经被淘汰了。官方推荐使用新款 CMD 形式的 SDK Tools。</span></div></div><div><span>不过没关系，<span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">不影响使用</span>。</span></div></blockquote><div><br></div><div><span><br></span></div><div><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;"><b>Ref：</b></span></div><blockquote><div><a href="https://www.jianshu.com/p/4ac1313b50cb">《简书 - 安装并配置android sdk》</a></div><div><a href="https://www.twle.cn/l/yufei/android/android-basic-sdk.html">《twle - Android SDK 安装》</a></div><div><a href="https://blog.csdn.net/zeternityyt/article/details/79655150">《android SDK安装以及环境变量配置（windows）》</a></div></blockquote><blockquote><blockquote><div><a href="https://www.cnblogs.com/nebie/p/9145627.html" style="text-decoration-skip-ink: none;">《cnblogs - Android SDK的下载与安装》</a><span>（对上面文章的补充）</span></div></blockquote></blockquote><div><br></div><div><br></div><div><br></div><div><br></div><div><h1><br></h1><div><div><br></div></div><div><br></div></div><div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2>环境变量：</h2><hr></div><blockquote><div><div><span data-wiz-span="data-wiz-span">Android SDK 的环境变量主要是 adb 相关的环境变量。</span></div></div></blockquote><div><div><br></div><div><span data-wiz-span="data-wiz-span" style="background-color: rgb(255, 255, 0);">重头戏，好好写</span></div><div><br></div><div><b style="font-size:1.333rem">配置：</b></div></div><div><b>Android Home</b>：</div><blockquote><div><b>变量名</b>：ANDROID_HOME&nbsp; 或&nbsp;&nbsp;<span>ANDROID</span><span>_SDK_ROOT</span></div><div><b>路径</b>：SDK_Tools 包的路径。如 <span data-wiz-span="data-wiz-span" style="background-color: rgb(127, 127, 127); color: rgb(255, 255, 255);">D:\1_System\1_Installation\1_SDE\Android\SDK_Tools\android-sdk-windows</span></div><div><div style="text-align: center;"><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/b67aa7ea-07b4-46e7-a39e-9a98856de713.png"></div><div><div style="text-align: left;"><br></div><div style="text-align: left;"><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">Remark</span>：如果是 Studio 安装的 SDK，那么 SDK Home 就是 Android Studio 的 Home 目录下的 sdk 目录。<img alt="" data-media-type="image" src="" data-attr-org-src-id="54AB009FC77A4C01A907AA1E48F7DAEE"></div><div><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/f80c85a2-bc6e-4337-a838-f8b3b767e2ef.png"></div></div></div></div></div><div style="text-align: center;"><br></div></blockquote><div><b>SDK Tools、Platform-Tools</b>：</div><blockquote><div><div><div><b>变量名</b>：Path</div></div></div><div><div><div><b>路径</b>：</div></div></div><blockquote><div><div><div><div><b>SDK Tools</b>：</div></div></div></div></blockquote></blockquote><blockquote><blockquote><blockquote><div><div><div><div>%ANDROID_HOME%\tools;</div></div></div></div></blockquote></blockquote><blockquote><blockquote><div><div><span>%ANDROID_SDK_ROOT%\tools;</span></div></div></blockquote></blockquote></blockquote><blockquote><blockquote><div><div><div><b>Platform-Tools</b>：</div></div></div></blockquote></blockquote><blockquote><blockquote><blockquote><div><div><div>%ANDROID_HOME%\platform-tools;</div></div></div></blockquote></blockquote><blockquote><blockquote><div><div><span>%ANDROID_SDK_ROOT%\platform-tools;</span></div></div></blockquote></blockquote></blockquote><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/75d5ed60-5e05-4f5e-a2fb-2c0596441a33.png"></div><div><br></div></div><div><br></div><div><br></div><div><span data-wiz-span="data-wiz-span" style="color:rgb(255, 255, 255);background-color:rgb(0, 147, 0);"><b>Tips：</b></span></div><blockquote><div><span data-wiz-span="data-wiz-span" style="color:rgb(255, 255, 255);background-color:rgb(0, 147, 0);">注意，环境变量名称是既定的，像 JAVA_HOME 那样，因此不能自己随便取。因此，把&nbsp;ANDROID_HOME 改为&nbsp;ANDROID_SDK_TOOL_HOME，这样一看就知道是 SDK Tools 工具包目录，像这样想见名知意的想法是行不通的。<br></span></div></blockquote><blockquote></blockquote><blockquote><div><span data-wiz-span="data-wiz-span" style="color:rgb(255, 255, 255);background-color:rgb(0, 147, 0);"><br></span></div></blockquote><blockquote></blockquote><blockquote><div><span data-wiz-span="data-wiz-span" style="color:rgb(255, 255, 255);background-color:rgb(0, 147, 0);">2 个名称最好都配置一下。因为在当前环境用当前打包工具打包 App 的过程中，Android_Home 和 Android_SDK_Root 都会用到，虽然网上的教程只让你配置&nbsp;Android_Home。</span></div><div><span data-wiz-span="data-wiz-span" style="color:rgb(255, 255, 255);background-color:rgb(0, 147, 0);">Android_Home 是 Cordova 反对的，Android_SDK_Root 是 <span>Cordova<span>&nbsp;</span></span>推荐的。由于整个打包过程中 2 个都会用到，所以 2 个名称最好都配置一下。这是处在版本升级的过渡过程中容易引发的问题。</span></div><div><span style="background-color: rgb(0, 147, 0); color: rgb(255, 255, 255);">例如，如下图，在打包工具中，它使用的就是 Android_Home，不是 Android_SDK_Root 。可见配置两个环境变量很有必要。</span></div></blockquote><blockquote><div><div><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/cb4a6db9-b034-46a4-ba1e-3ff276ffb6ff.png"></div><div><br></div></div></div></blockquote><div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b style="font-size:1.333rem">检查配置</b><b></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">：</span></b></div></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638238382474_5190" class="wiz-code-container"><textarea style="display:none;"># 使用 adb 测试：
adb version

# 例如
C:\Users\Administrator&gt;adb version
Android Debug Bridge version 1.0.39
Revision 3db08f2c6889-android    # studio 捆绑的 sdk版本
Installed as D:\Android\sdk\platform-tools\adb.exe</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638238382474_5190"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 200px; min-width: 431px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>8</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 使用 adb 测试：</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">adb version</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 例如</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">C:\Users\Administrator&gt;adb version</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">Android Debug Bridge version <span class="cm-number">1</span>.0.39</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">Revision 3db08f2c6889-android    <span class="cm-comment"># studio 捆绑的 sdk版本</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">Installed as D:\Android\sdk\platform-tools\adb.exe</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 200px;"></div><div class="CodeMirror-gutters" style="height: 230px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><div><br></div><div><br></div><div><br></div></div><div><b style="font-size:1.333rem">Ref：</b></div><blockquote><div><a href="https://blog.csdn.net/weixin_43476931/article/details/102843793">《csdn - Android Studio、Cordova安装、JDK、SDK环境配置，打包APP等》</a></div><div><u>有道笔记：《<span>（待补全）Ionic 打包 Androd 时的各种问题：.note》之《3、Android SDK 下载、安装、配置</span>》</u></div></blockquote><blockquote><blockquote><div><a href="https://blog.csdn.net/zeternityyt/article/details/79655150" style="text-decoration-skip-ink:none;">《android SDK安装以及环境变量配置（windows）》</a></div></blockquote><blockquote><blockquote><div><a href="https://www.cnblogs.com/nebie/p/9145627.html" style="text-decoration-skip-ink:none;">《cnblogs - Android SDK的下载与安装》</a><span>（对上面文章的补充）</span></div></blockquote></blockquote></blockquote><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2>其他知识：</h2><div><br></div><h3>SDK Manager 的 repository 地址的依据：</h3><div>SDK Manager 的 repository （镜像源）的依据就是 xml 的 URL，与代理（Proxy）无瓜。</div><div>SDK Manager 的 repository 相关的配置文件在 <u>%User_Home%\</u><u>.android</u> 中，如 <u>C:\Users\Administrator\.android</u> 。配置文件为：</div><div><ul><li>repositories.cfg</li><li>sites-settings.cfg</li></ul><div><br></div></div><div>详见<span>笔记</span></div><blockquote style=""><div><span>《</span><a href="/views/技术总结/前端技术/为知笔记/探究_SDK_Manager_指定_repository（镜像源）的依据.html">探究 SDK Manager 指定 repository （镜像源）的依据</a><span>》。</span></div></blockquote><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><div><br></div><h2 style="font-size:1.5rem;">开发问题记录：</h2><div><span><br></span></div><div><span>见</span><span>笔记《</span><a href="/views/技术总结/前端技术/为知笔记/Android_SDK_安装_开发问题记录.html" style="text-decoration-skip-ink:none;">Android SDK 安装开发问题记录</a><span>》</span></div><div><br></div><div><br></div><div><br></div></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div>.</div><div><br></div><h1 style="font-size: 1.67rem;"><span>Gradle 的安装与配置</span></h1><hr><div><span><div><b><span id="wizkm_highlight_tmp_span">公共、独享</span><span id="wizkm_highlight_tmp_span">&nbsp;Gradle 工具与 Gradle 项目的概念：</span></b><br></div><div><div>无论是公共的 Gradle 工具还是独享的 Gradle 工具，它们的本质都是一样，无非是同样的文件复制了 2 份，一份让所有 Gradle 项目使用、一份仅让一个 Gradle 项目使用。</div></div><div><br></div><div><br></div><div><br></div><div><br></div><br></span></div><div><span><br></span></div><h2 style="font-size: 1.5rem;"><span><b>下载与安装：</b></span></h2><hr><div><span style="color: rgb(64, 64, 64); font-family: -apple-system, BlinkMacSystemFont, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">Gradle官网：</span><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fservices.gradle.org%2Fdistributions%2F" target="_blank" style="color: rgb(6, 129, 208); text-decoration: none; font-family: -apple-system, BlinkMacSystemFont, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">下载地址</a><span style="color: rgb(64, 64, 64); font-family: -apple-system, BlinkMacSystemFont, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">&nbsp;</span></div><div><span style="color: rgb(64, 64, 64); font-family: -apple-system, BlinkMacSystemFont, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">好心人网盘：</span><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fpan.baidu.com%2Fs%2F1igdzHfYvHs8IdqoGCfZoTQ" target="_blank" style="color: rgb(6, 129, 208); text-decoration: none; font-family: -apple-system, BlinkMacSystemFont, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">百度网盘</a><span style="color: rgb(64, 64, 64); font-family: -apple-system, BlinkMacSystemFont, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;">&nbsp;</span></div><div>文件选择依据： gradle-xxx-bin.zip</div><div><br></div><div>下载后直接解压即可，解压路径任意。</div><div><br></div><div><b>Ref：</b></div><blockquote><div><a href="https://www.jianshu.com/p/e7eaf8bf36de">《简书 - ionic build 打包android必须环境---安装Gradle》</a></div></blockquote><div><br></div><div><br></div><h2>环境变量：</h2><div><hr><br></div><div><div><div><b style="font-size:1.333rem">配置：</b></div><div><b><br></b></div><div><b>Gradle Central：</b></div></div></div><blockquote><div><div><div><div style="text-align: left;"><b style="font-weight: bold;">变量名</b><b>：</b><span data-wiz-span="data-wiz-span">GRADLE_CENTRAL</span></div></div></div></div><div><div><div style="text-align: left;"><b style="font-weight: bold;">路径</b><b>：</b><span data-wiz-span="data-wiz-span">指定 GRADLE 及其依赖包集中存放管理的路径，</span>如&nbsp;</div></div></div></blockquote><blockquote><blockquote><div><div><div style="text-align: left;"><span data-wiz-span="data-wiz-span" style="background-color: rgb(127, 127, 127); color: rgb(255, 255, 255);">D:\1_System\1_Installation\2_SDT\Gradle</span></div></div></div></blockquote></blockquote><blockquote><div><br></div></blockquote><blockquote></blockquote><div><div><b>Gradle Home</b>：</div></div><blockquote><div><b>变量名</b>：<span>GRADLE_HOME</span></div><div><b>路径</b>：公共&nbsp;<span>GRADLE</span>&nbsp;解压的路径<span>，</span>如<span>&nbsp;</span></div></blockquote><blockquote><blockquote><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(127, 127, 127);color:rgb(255, 255, 255);">%GRADLE_CENTRAL%\gradle-4.1</span></div></blockquote></blockquote><blockquote><div><br></div></blockquote><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span">Gradle Bin</span></b>：</div><blockquote><div><b>变量名</b>：<span>Path</span></div></blockquote><blockquote><div style="text-align: left;"><b>路径</b>：<span>公共&nbsp;</span><span>GRADLE</span><span>&nbsp;的 bin 目录，如</span></div></blockquote><blockquote><blockquote><div style="text-align: left;"><span>&nbsp;</span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">%GRADLE_HOME%\bin</span></div></blockquote></blockquote><div><div><br></div></div><div><b>Gradle User Home：</b></div><blockquote><div><div><b>变量名</b>：<span>GRADLE_USER_HOME</span></div></div><div><div><b>路径</b>：指定&nbsp;<span>GRADLE</span>&nbsp;<span>用于</span><span>存储依赖包的</span><span>公共</span><span>目录 <span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">.gradle</span> 的</span>路径，如&nbsp;</div></div></blockquote><blockquote><blockquote><div><div><span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">%GRADLE_CENTRAL%\.gradle</span></div></div></blockquote></blockquote><div><br></div><div><div><br></div></div><div><span data-wiz-span="data-wiz-span" style="background-color: rgb(0, 147, 0); color: rgb(255, 255, 255);"><b>Tips：</b></span></div><blockquote><ul><li><span data-wiz-span="data-wiz-span" style="background-color: rgb(0, 147, 0); color: rgb(255, 255, 255);">环境变量 Gradle Central 是自己自定义的，主要是为了便于管理 Gradle 相关的路径，查看变量间的从属关系，也避免路径中出现冗余代码。</span></li><li><span data-wiz-span="data-wiz-span" style="color:rgb(255, 255, 255);background-color:rgb(0, 147, 0);">“.gradle” 这样特殊命名的目录是可以加到环境变量里的，程序用起来没有问题。</span></li></ul></blockquote><div><div><br></div><div><br></div></div><div><br></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">检查配置：</span></b></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638240408605_5458" class="wiz-code-container"><textarea style="display:none;"># 1. 使用 gradle 命令测试
gradle -v

# 例如
C:\Users\Administrator&gt;gradle -v
------------------------------------------------------------
Gradle 4.1
------------------------------------------------------------

Build time:   2017-08-07 14:38:48 UTC
Revision:     941559e020f6c357ebb08d5c67acdb858a3defc2

Groovy:       2.4.11
Ant:          Apache Ant(TM) version 1.9.6 compiled on June 29 2015
JVM:          1.8.0_201 (Oracle Corporation 25.201-b09)
OS:           Windows 10 10.0 amd64

# 2.资源管理器用如下环境变量打开目录：%GRADLE_USER_HOME%</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638240408605_5458"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 440px; min-width: 522.672px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>18</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 1. 使用 gradle 命令测试</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">gradle <span class="cm-attribute">-v</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 例如</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">C:\Users\Administrator&gt;gradle <span class="cm-attribute">-v</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-attribute">------------------------------------------------------------</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">Gradle <span class="cm-number">4</span>.1</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-attribute">------------------------------------------------------------</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">Build time:   <span class="cm-number">2017</span><span class="cm-attribute">-08-07</span> <span class="cm-number">14</span>:38:48 UTC</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">Revision:     941559e020f6c357ebb08d5c67acdb858a3defc2</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">Groovy:       <span class="cm-number">2</span>.4.11</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">Ant:          Apache Ant(TM) version <span class="cm-number">1</span>.9.6 compiled on June <span class="cm-number">29</span> <span class="cm-number">2015</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">JVM:          <span class="cm-number">1</span>.8.0_201 (Oracle Corporation <span class="cm-number">25</span>.201-b09)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">OS:           Windows <span class="cm-number">10</span> <span class="cm-number">10</span>.0 amd64</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">17</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">18</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 2.资源管理器用如下环境变量打开目录：%GRADLE_USER_HOME%</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 440px;"></div><div class="CodeMirror-gutters" style="height: 470px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><br></div><div><br></div><div><div><br><div style="text-align: left;"><b style="font-size:1.333rem">附：环境变量调试方法：</b><b style="font-size:1.333rem"></b></div></div><div><b><br></b></div><div><b>控制台打印环境变量</b>：</div></div><blockquote><div><div><b>bash 命令</b>：</div></div><div><div>&nbsp; &nbsp;<b>&nbsp;echo</b>：<span>echo&nbsp;</span>%GRADLE_USER_HOME%</div></div><div><div>&nbsp; <b>&nbsp; printf</b>：<span>printf "$GRADLE_USER_HOME"</span><span>&nbsp; &nbsp; （反对使用，路径易被转义）</span></div></div><div><div><b>gradle 脚本</b>：</div></div><div><div>&nbsp; &nbsp;<b>&nbsp;</b><b>println()</b>：println($GRADLE_USER_HOME)</div></div><div><br></div></blockquote><div><b>Ref：</b></div><blockquote><div><div><a href="https://www.cnblogs.com/yongfengnice/p/11260882.html" style="text-decoration-skip-ink:none;">《cnblogs - Android Studio里面使用gradle打印并查看打印的信息Android Studio里面使用gradle打印并查看打印的信息》</a></div></div><div><div><br></div></div></blockquote><div><div><div><div><br></div></div></div></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2 style="font-size:1.5rem;"><span data-wiz-span="data-wiz-span"><br><br>Maven 仓库：</span></h2><hr><div>众所周知，Gradle 默认的依赖包远程仓库（google、jcenter、mavenCentral）不是被墙就是龟速，根本没法用，因此需要修改 Gradle 默认的远程仓库为国内的高速仓库，如阿里云的仓库<span>&nbsp;</span><a href="https://developer.aliyun.com/mvn/guide" style="text-decoration-skip-ink:none;">云效 Maven</a>。<span>但是，公共的 Gradle 无需配置 Maven 仓库，只需给 Gradle 管理的项目配置，比如 Android 项目，包括 Cordova 里的&nbsp;</span><span>Android 项目。</span></div><div><br></div><div><br></div><div><span><b style="font-size:1.333rem">1、前言：</b></span></div><blockquote></blockquote><div>Maven 仓库可以把远程仓库和本地仓库结合使用，可避免总去网上下。详见<a href="https://blog.csdn.net/rao991207823/article/details/110952583">《csnd - Gradle安装和使用maven仓库配置》</a>之《Maven 仓库》。</div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b style=""><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">2、选择优质仓库</span></b></div><div><div><div><span>在阿里云上找 google、jcenter </span><span>这 2 个仓库</span><span>对应的镜像仓库即可。</span></div></div></div><div><span><br></span></div><div><span>阿里仓库列表：</span><a href="https://developer.aliyun.com/mvn/guide">https://developer.aliyun.com/mvn/guide</a></div><div><span>阿里的 google 仓库：</span><a href="https://maven.aliyun.com/nexus/content/repositories/google" style="">https://maven.aliyun.com/nexus/content/repositories/google</a>&nbsp; &nbsp; （老版地址，会重定向，不影响正常使用）</div><div><span>阿里的 jCenter 仓库：</span><span><a href="http://maven.aliyun.com/nexus/content/repositories/jcenter" style="text-decoration-skip-ink:none;">http://maven.aliyun.com/nexus/content/repositories/jcenter</a>&nbsp; &nbsp; &nbsp;</span><span>（老版地址，</span><span>会重定向，</span><span>不影响正常使用）</span><span><br></span></div><div><br></div><div><div><span style="background-color: rgb(0, 147, 0); color: rgb(255, 255, 255);" data-wiz-span="data-wiz-span"><b>Tips：</b></span></div></div><blockquote style=""><div><div><span style="background-color:rgb(0, 147, 0);color:rgb(255, 255, 255)" data-wiz-span="data-wiz-span">Gralde 默认使用的 google()、jcenter()、mavenCentral() 等仓库统统都得换，因为可能有一部分类库包要去 Google 上下，有一部分要去&nbsp;jCenter 上下，然而这些都是垃圾仓库，比如&nbsp;jCenter ，开始下载是龟速，过一会儿后卡住直到超时报错，让你白等半小时。</span></div></div><div><br></div></blockquote><div><div><br></div></div><div><br></div><div><br></div><div><br></div><div><br></div><div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">3、配置核心代码</span></b></div></div><div>无论配置在哪里，修改什么，配置的代码只有一种。选取代码后然后选择需要的配置范围进行配置。</div><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><div><br></div></div><div><b style="font-size:1.167rem">3.1、前言：</b></div></span></div><blockquote><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><b><br></b></div></span></div></blockquote><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><b>Gradle 中 Maven 仓库的配置语法：</b></div></span></div><blockquote><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><blockquote></blockquote></span></div></blockquote><div data-mode="Java" data-theme="eclipse" id="wiz_cm_1638872994810_3482" class="wiz-code-container"><textarea style="display:none;">maven { url "............" }
maven { name "............" ; url "............" }		// name 可带可不带</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638872994810_3482"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 44px; left: 596.547px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 56px; min-width: 569.547px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>2</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 566.547px; top: 24px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">maven</span> { <span class="cm-variable">url</span> <span class="cm-string">"............"</span> }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">maven</span> { <span class="cm-variable">name</span> <span class="cm-string">"............"</span> ; <span class="cm-variable">url</span> <span class="cm-string">"............"</span> }<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">// name 可带可不带</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 56px;"></div><div class="CodeMirror-gutters" style="height: 86px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><blockquote><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><div>例如：</div></div></span></div><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><blockquote></blockquote></span></div></blockquote><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638872999016_7771" class="wiz-code-container"><textarea style="display:none;">maven { url "http://....."}
maven { url "file:///....."}</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638872999016_7771"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 56px; min-width: 222.5px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>2</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">maven { url <span class="cm-string">"http://....."</span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">maven { url <span class="cm-string">"file:///....."</span>}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 56px;"></div><div class="CodeMirror-gutters" style="height: 86px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><blockquote><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><div><span>这就像用数组建了一个 maven 列表样，实际调用的顺序是从上到下的。</span></div></div></span></div></blockquote><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><br></div><div><br></div></span></div><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><div><b style="font-size:1.167rem">3.2、低阶配置法（</b><b></b><b style="color:rgb(255, 104, 32);font-size:1.167rem">老老实实法</b><b style="font-size:1.167rem">）：</b></div></div></span><blockquote><blockquote></blockquote></blockquote></div><div data-mode="Java" data-theme="eclipse" id="wiz_cm_1638865942561_9252" class="wiz-code-container"><textarea style="display:none;">allprojects {
    repositories {
        // 本地
        maven { url 'file:///D:/apache/maven_repository'}
        mavenLocal()
        // 远程
        maven { name "AlibabaGoogle" ; url "https://maven.aliyun.com/nexus/content/repositories/google" }
        maven { name "AlibabaJCenter" ; url "http://maven.aliyun.com/nexus/content/repositories/jcenter" }
        jcenter()
        mavenCentral()
    }

    buildscript { 
        repositories { 
            // 远程
            maven { name "AlibabaGoogle" ; url "https://maven.aliyun.com/nexus/content/repositories/google" }
            maven { name "AlibabaJCenter" ; url "http://maven.aliyun.com/nexus/content/repositories/jcenter" }
            jcenter()
            mavenCentral()
        }
    }
}</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638865942561_9252"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none; right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 536px; min-width: 853.609px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>22</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">allprojects</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">repositories</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">// 本地</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">maven</span> { <span class="cm-variable">url</span> <span class="cm-string">'file:///D:/apache/maven_repository'</span>}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">mavenLocal</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">// 远程</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">maven</span> { <span class="cm-variable">name</span> <span class="cm-string">"AlibabaGoogle"</span> ; <span class="cm-variable">url</span> <span class="cm-string">"https://maven.aliyun.com/nexus/content/repositories/google"</span> }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">maven</span> { <span class="cm-variable">name</span> <span class="cm-string">"AlibabaJCenter"</span> ; <span class="cm-variable">url</span> <span class="cm-string">"http://maven.aliyun.com/nexus/content/repositories/jcenter"</span> }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">jcenter</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">mavenCentral</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">buildscript</span> { </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">repositories</span> { </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-comment">// 远程</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">maven</span> { <span class="cm-variable">name</span> <span class="cm-string">"AlibabaGoogle"</span> ; <span class="cm-variable">url</span> <span class="cm-string">"https://maven.aliyun.com/nexus/content/repositories/google"</span> }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">17</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">maven</span> { <span class="cm-variable">name</span> <span class="cm-string">"AlibabaJCenter"</span> ; <span class="cm-variable">url</span> <span class="cm-string">"http://maven.aliyun.com/nexus/content/repositories/jcenter"</span> }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">18</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">jcenter</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">19</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-variable">mavenCentral</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">20</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">21</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">22</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 536px;"></div><div class="CodeMirror-gutters" style="height: 566px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><blockquote><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><b style="font-size: 1.167rem;"><span data-wiz-span="data-wiz-span"><br></span></b></div><div><b style="font-size: 1.167rem;"><span data-wiz-span="data-wiz-span">3.3、高阶配置法（</span></b><span data-wiz-span="data-wiz-span" style=""><b></b></span><b style="color: rgb(255, 104, 32); font-size: 1.167rem;"><span data-wiz-span="data-wiz-span">釜底抽薪法</span></b><span data-wiz-span="data-wiz-span" style=""><b></b></span><b style="font-size: 1.167rem;"><span data-wiz-span="data-wiz-span">）：</span></b><br></div></span></blockquote></div><div data-mode="Java" data-theme="eclipse" id="wiz_cm_1638865942467_5142" class="wiz-code-container"><textarea style="display:none;">// v1：原版
allprojects{
    repositories {
        def ALIYUN_REPOSITORY_URL = 'https://maven.aliyun.com/repository/public'
        def ALIYUN_JCENTER_URL = 'https://maven.aliyun.com/repository/jcenter'
        all { ArtifactRepository repo -&gt;
            if(repo instanceof MavenArtifactRepository){
                def url = repo.url.toString()
                if (url.startsWith('https://repo1.maven.org/maven2')) {
                    project.logger.lifecycle "Repository ${repo.url} replaced by $ALIYUN_REPOSITORY_URL."
                    remove repo     // 这一步是关键
                }
                if (url.startsWith('https://jcenter.bintray.com/')) {
                    project.logger.lifecycle "Repository ${repo.url} replaced by $ALIYUN_JCENTER_URL."
                    remove repo     // 这一步是关键
                }           
            }
        }
        maven { url ALIYUN_REPOSITORY_URL }
        maven { url ALIYUN_JCENTER_URL }
    }
}


// v2：个人优化版
allprojects{
    repositories {
        // 添加优质仓库
        maven { url 'https://maven.aliyun.com/repository/public' }
        maven { url 'https://maven.aliyun.com/repository/jcenter' }   
        
        // 删除垃圾仓库
        // -- 遍历所有现有仓库      推测： all 可能是遍历的方法
        all { ArtifactRepository repo -&gt;
            // 筛选 Maven 仓库
            if(repo instanceof MavenArtifactRepository){    
                // 获取 Maven 仓库的 URL
                def url = repo.url.toString()
                // 检查 URL 是否为垃圾仓库的 URL。检查方法：检查 URL 是否以辣鸡仓库的 URL 开头，如 https://repo1.maven.org/maven2、https://jcenter.bintray.com/
                def urlAIsRubbish = url.startsWith('https://repo1.maven.org/maven2')
                def urlBIsRubbish = url.startsWith('https://jcenter.bintray.com/')                
                // 如果为垃圾仓库的 URL
                if (urlAIsRubbish || urlBIsRubbish) {
                    // 则删除该仓库
                    remove repo     // 这一步是关键
                    project.logger.lifecycle "Repository ${repo.url} removed by Kai."   // 打印日志
                } 
            }
        }         
    }
}</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638865942467_5142"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="right: 0px; left: 0px; height: 18px; pointer-events: none; display: block;"><div style="height: 100%; min-height: 1px; width: 1218px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 1232px; min-width: 1187.63px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>51</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// v1：原版</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">allprojects</span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">repositories</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">def</span> <span class="cm-variable">ALIYUN_REPOSITORY_URL</span> <span class="cm-operator">=</span> <span class="cm-string">'https://maven.aliyun.com/repository/public'</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">def</span> <span class="cm-variable">ALIYUN_JCENTER_URL</span> <span class="cm-operator">=</span> <span class="cm-string">'https://maven.aliyun.com/repository/jcenter'</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">all</span> { <span class="cm-variable">ArtifactRepository</span> <span class="cm-variable">repo</span> <span class="cm-operator">-&gt;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">if</span>(<span class="cm-variable">repo</span> <span class="cm-keyword">instanceof</span> <span class="cm-variable">MavenArtifactRepository</span>){</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">def</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-variable">repo</span>.<span class="cm-variable">url</span>.<span class="cm-variable">toString</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> (<span class="cm-variable">url</span>.<span class="cm-variable">startsWith</span>(<span class="cm-string">'https://repo1.maven.org/maven2'</span>)) {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-variable">project</span>.<span class="cm-variable">logger</span>.<span class="cm-variable">lifecycle</span> <span class="cm-string">"Repository ${repo.url} replaced by $ALIYUN_REPOSITORY_URL."</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-variable">remove</span> <span class="cm-variable">repo</span>     <span class="cm-comment">// 这一步是关键</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> (<span class="cm-variable">url</span>.<span class="cm-variable">startsWith</span>(<span class="cm-string">'https://jcenter.bintray.com/'</span>)) {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-variable">project</span>.<span class="cm-variable">logger</span>.<span class="cm-variable">lifecycle</span> <span class="cm-string">"Repository ${repo.url} replaced by $ALIYUN_JCENTER_URL."</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-variable">remove</span> <span class="cm-variable">repo</span>     <span class="cm-comment">// 这一步是关键</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                }           </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">17</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">            }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">18</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">19</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">maven</span> { <span class="cm-variable">url</span> <span class="cm-variable">ALIYUN_REPOSITORY_URL</span> }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">20</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">maven</span> { <span class="cm-variable">url</span> <span class="cm-variable">ALIYUN_JCENTER_URL</span> }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">21</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">22</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">23</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">24</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">25</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// v2：个人优化版</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">26</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">allprojects</span>{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">27</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">repositories</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">28</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">// 添加优质仓库</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">29</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">maven</span> { <span class="cm-variable">url</span> <span class="cm-string">'https://maven.aliyun.com/repository/public'</span> }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">30</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">maven</span> { <span class="cm-variable">url</span> <span class="cm-string">'https://maven.aliyun.com/repository/jcenter'</span> }   </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">31</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">32</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">// 删除垃圾仓库</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">33</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-comment">// -- 遍历所有现有仓库      推测： all 可能是遍历的方法</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">34</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable">all</span> { <span class="cm-variable">ArtifactRepository</span> <span class="cm-variable">repo</span> <span class="cm-operator">-&gt;</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">35</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-comment">// 筛选 Maven 仓库</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">36</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span class="cm-keyword">if</span>(<span class="cm-variable">repo</span> <span class="cm-keyword">instanceof</span> <span class="cm-variable">MavenArtifactRepository</span>){    </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">37</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-comment">// 获取 Maven 仓库的 URL</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">38</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">def</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span class="cm-variable">repo</span>.<span class="cm-variable">url</span>.<span class="cm-variable">toString</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">39</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-comment">// 检查 URL 是否为垃圾仓库的 URL。检查方法：检查 URL 是否以辣鸡仓库的 URL 开头，如 https://repo1.maven.org/maven2、https://jcenter.bintray.com/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">40</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">def</span> <span class="cm-variable">urlAIsRubbish</span> <span class="cm-operator">=</span> <span class="cm-variable">url</span>.<span class="cm-variable">startsWith</span>(<span class="cm-string">'https://repo1.maven.org/maven2'</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">41</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-variable">def</span> <span class="cm-variable">urlBIsRubbish</span> <span class="cm-operator">=</span> <span class="cm-variable">url</span>.<span class="cm-variable">startsWith</span>(<span class="cm-string">'https://jcenter.bintray.com/'</span>)                </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">42</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-comment">// 如果为垃圾仓库的 URL</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">43</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> (<span class="cm-variable">urlAIsRubbish</span> <span class="cm-operator">||</span> <span class="cm-variable">urlBIsRubbish</span>) {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">44</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-comment">// 则删除该仓库</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">45</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-variable">remove</span> <span class="cm-variable">repo</span>     <span class="cm-comment">// 这一步是关键</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">46</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                    <span class="cm-variable">project</span>.<span class="cm-variable">logger</span>.<span class="cm-variable">lifecycle</span> <span class="cm-string">"Repository ${repo.url} removed by Kai."</span>   <span class="cm-comment">// 打印日志</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">47</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">                } </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">48</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">            }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">49</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">        }         </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">50</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">51</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 1232px;"></div><div class="CodeMirror-gutters" style="height: 1262px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><div><br></div><div>以上 2 种方式的代码任选其一即可，当然，也可以配合使用。</div><div><br></div></div><div><div><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><span data-wiz-span="data-wiz-span"><br></span></div></span></div></div><div><div><div><div><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">3.4、Ref：</span></b></div></div></div><blockquote><div><div><a href="https://www.cnblogs.com/chansblogs/p/12943991.html?hmsr=joyk.com&amp;utm_source=joyk.com&amp;utm_medium=referral">《cnblogs - Maven、Gradle 配置国内镜像源》</a></div><div><a href="https://blog.csdn.net/growing_tree/article/details/106618518">《<span style="color: rgb(0, 0, 0);">csdn - init.gradle 文件全局替换仓库地址解决 Connection 失败的问题</span>》</a><br></div><div><a href="https://zhuanlan.zhihu.com/p/27154291">《知乎 - 修改阿里云Maven仓库地址》</a></div><div><a href="https://blog.csdn.net/ezconn/article/details/90794869" style="text-decoration-skip-ink: none;"><span>《</span><span>csdn -&nbsp;</span><span>AndroidStudio maven jcenter google 等仓库配置国内镜像</span><span>》</span></a></div><div><a href="https://www.jianshu.com/p/86d5c337b03d" style="text-decoration-skip-ink:none;">《简书 - 为Gradle设置镜像，解决jcenter依赖无法下载或者下载过慢问题》</a></div></div><div><div><a href="https://www.cnblogs.com/lenmom/p/10364743.html"><span data-wiz-span="data-wiz-span" style="text-decoration-skip-ink:none;">《cnblogs -&nbsp;gradle本地、远程仓库配置》</span></a></div></div></blockquote><blockquote><div><div>有道笔记<u>《2020.01.12&nbsp; 打包App》</u></div></div></blockquote><blockquote><blockquote><blockquote><div><div>之<u>《紧随问题：<span>去 google、jcenter 的网站上下载大量依赖 jar 包、pom 文件，下着下着就卡死不动。》</span></u></div></div></blockquote></blockquote></blockquote><blockquote><div><div><br></div></div></blockquote></div><div><br></div></div><div><br></div><div><div><b><span><b><span><b><b><span><br><br></span></b></b></span></b></span></b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">4、配置作用范围：</span></b></div><div>作用范围可任选其一即可，也可全局和局部混合使用，但推荐使用真正的全局方法，一步到位，省时省力不走弯路，详见当前笔记：</div></div><blockquote><div><div><u>《<span>3、配置作用范围 &gt; 3.2、Gradle 项目 &gt;&nbsp;</span>3.2.2、全部 Gradle 项目 》</u></div></div></blockquote><div><div><br></div><div><br></div></div><div style="text-align: left;"><b style="font-size:1.167rem">4.1、Gradle </b><b style="font-size:1.167rem;color:rgb(255, 104, 32)">工具</b><b style="font-size:1.167rem">：</b></div><div><div><div style="font-weight: bold;"><br></div><div style="font-weight: bold;"><b><span><b><span><b><b><span>前言：</span></b></b></span></b></span></b></div></div></div><blockquote><div><div><div><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">这个一般不做配置</span><span>，除非有特殊需求。这是这里的配置受到版本的约束，如果想换版本，就得重新配置，算不上真全局，很不实用。因此即使有需要，也优先在 “%</span><span>Gradle_User_Home</span><span>%/.gradle” 中配了，因为这里不受 Gradle 版本和重装的影响，是真正的全局。</span></div></div></div><div><div><div><span>如果该法对 Gradle 项目无效，</span><span>比如 Cordova 里的 Android 项目，那么说明 Android 项目使用的 Gradle 工具应不是你配置的那个。</span></div></div></div></blockquote><div><div><div><b><br></b></div><div><b>推荐程度：</b></div></div></div><blockquote></blockquote><blockquote><div><div><div><span data-wiz-span="data-wiz-span">☆☆☆☆☆ （反对，不实用）</span></div></div></div></blockquote><div><div><div><br></div><div style="font-weight: bold;"><b><span><b><span><b><b><span>配置方法：</span></b></b></span></b></span></b></div></div></div><blockquote><div><div><div><span>在 %GRADLE_HOME%/init.d 目录下后缀为</span><span><span>&nbsp;</span>.gradle 的脚本文件里添加上面的配置核心代码。</span></div></div></div><div><div><div><span>为了命名统一，最好用 init.gradle 命名。</span></div></div></div></blockquote><div><div><div style="font-weight: bold;"><br></div></div></div><div><div><div style="font-weight: bold;"><br></div></div></div><div><br></div><div style="text-align: left;"><a wiznote_tag="windows_bookmark" wiznote_add_time="1638885667537" name="3.2、Gradle 项目："><span data-wiz-span="data-wiz-span"><b style="font-size:1.167rem"><span data-wiz-span="data-wiz-span">4.2、Gradle&nbsp;</span></b><span style="font-size:1.167rem"><b style=""></b></span></span><span data-wiz-span="data-wiz-span" style="font-size:1.167rem"><b style=""><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">项目：</span></b></span></a></div><div style="text-align: left;"><b><br></b></div><div style="text-align: left;"><b>4.2.1、<span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">单个</span>&nbsp;</b><b>Grad</b><b></b><b>le </b><b></b><b><span data-wiz-span="data-wiz-span">项目</span></b><b></b><b></b><b></b><b><span data-wiz-span="data-wiz-span">：</span></b></div><blockquote><blockquote><div style="text-align: left;"><span data-wiz-span="data-wiz-span">例如 Cordova 的 Android 项目</span></div></blockquote></blockquote><div style="text-align: left;"><span data-wiz-span="data-wiz-span"><br></span></div><blockquote></blockquote><blockquote><div><div style="text-align: left;"><b>推荐程度：</b></div></div></blockquote><blockquote><blockquote><div><div style="text-align: left;"><span data-wiz-span="data-wiz-span"><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">★★</span>☆☆☆ （不太推荐，麻烦又不通用）</span></div></div></blockquote></blockquote><blockquote><div><b><span><b><span><b><b><span><br></span></b></b></span></b></span></b></div><div><b><span><b><span><b><b><span>配置方法：</span></b></b></span></b></span></b></div></blockquote><blockquote><blockquote><div><span>对 3 处 <span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">build.gradle</span> 做同样的修改，分别是：</span></div></blockquote><blockquote><blockquote><div><b>根目录</b>：%Gradle_Project_Home%/build.gradle</div></blockquote></blockquote><blockquote><blockquote><b>app 目录</b>：<span>%</span><span>Gradle_Project_Home</span><span>%/app/build.gradle</span></blockquote></blockquote><blockquote><blockquote><b>CordovaLib 目录</b>：<span>%</span><span>Gradle_Project_Home</span><span>%/CordovaLib/build.gradle</span></blockquote></blockquote></blockquote><blockquote><div><br></div><div><br></div></blockquote><div><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div style="text-align: left;"><b><b style="background-color: rgb(255, 255, 255);">4.2.2、</b><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">全部</span> Gradle 项目</b><b style="font-size:1.167rem"><span data-wiz-span="data-wiz-span" style="font-size: 1rem;">：</span></b></div></span></div></div><blockquote></blockquote><blockquote><blockquote><div><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><span style="background-color: rgb(255, 255, 255);">例如 Cordova 的 Android 项目，以及其他用 Gradle 打包的项目。</span></div></span></div></div></blockquote></blockquote><blockquote><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);"><div><span style="background-color: rgb(255, 255, 255);"><br></span></div></span></div><div><div><b>推荐程度：</b></div></div><blockquote><div><div><span data-wiz-span="data-wiz-span"><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">★★★★★</span> （力推，一步到位，全版本受用）</span></div></div></blockquote></blockquote><div><span data-wiz-span="data-wiz-span"><blockquote><br></blockquote><blockquote><b><span><b><span><b><b><span>配置方法：</span></b></b></span></b></span></b></blockquote></span></div><blockquote><div><span data-wiz-span="data-wiz-span"><blockquote>在以下目录中的 <span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">init.gradle</span> 脚本文件中添加上面的配置核心代码”：</blockquote></span></div></blockquote><blockquote><blockquote><div><span data-wiz-span="data-wiz-span"><blockquote>&nbsp;<b>Gradle 用户目录</b>：%GRADLE_USER_HOME%&nbsp;</blockquote><blockquote><br></blockquote></span></div><span>优先使用“釜底抽薪法。</span></blockquote></blockquote><blockquote><div><span data-wiz-span="data-wiz-span"><blockquote>这里的文件名是定死的。如果文件不存在就新建。</blockquote></span></div></blockquote><div><span data-wiz-span="data-wiz-span"><blockquote><br></blockquote><blockquote></blockquote></span></div><blockquote><br></blockquote><b style="background-color:rgb(0, 147, 0);color:rgb(255, 255, 255)">Tips：</b><blockquote><ul><li><span style="background-color:rgb(0, 147, 0);color:rgb(255, 255, 255)" data-wiz-span="data-wiz-span">Gradle 用户目录&nbsp;&nbsp;%GRADLE_USER_HOME%<span>&nbsp;的是用于所有 Gradle 工具存储依赖文件（含 Gradle）的仓库，在该仓库根目录下的 init.gradle 脚本文件，会在所有 Gradle 项目 build 时优先执行，这就能让用户在 build 之前做点什么。</span></span></li><li><span style="background-color:rgb(0, 147, 0);color:rgb(255, 255, 255)">Gradle 用户目录&nbsp;&nbsp;%GRADLE_USER_HOME%</span><span style="background-color:rgb(0, 147, 0);color:rgb(255, 255, 255)">&nbsp;的</span><span style="background-color: rgb(0, 147, 0); color: rgb(255, 255, 255);">默认路径为 %USER_HOME%/.gradle。</span></li></ul></blockquote><div style="text-align: left;"><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2 style="text-align: left;"><span data-wiz-span="data-wiz-span">Gradle 项目配置——为 Cordova 配置 Gradle：</span></h2><div><hr></div><div><div>Cordova 会自己去下 Gradle，不用给它指定公共的 Gradle，主要是不适合指定给它指定公共的 Gradle。因此这里讲的是为 Cordova 指定独享的 Gradle。当然，这个独享的 Gradle 从严格意义上讲，也是可以作为公共的使用的，因为它一直在硬盘上，但不建议这么做，因为这会给后期维护添麻烦。</div></div><div><br></div><div><div><div><div><br></div><div><br></div><div><h3>1. 环境变量：</h3><h4><br></h4><div><span style="font-size: 1.167rem;"><b>1.1 配置：</b></span></div></div><div><span><b><br></b></span></div><div><span><b>Cordova Android Gradle Distribution URL</b></span><br></div><blockquote><div><b>变量名</b>：CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</div><div><b>变量值</b>：指定 Cordova 中的 Gradle 项目（即 Android）下载 Gradle&nbsp; 包的地址，如：</div><blockquote><div><span data-wiz-span="data-wiz-span" style="color:rgb(51, 102, 255);">本地包</span>：<span>file:///%GRADLE_CENTRAL%/gradle-</span><span data-wiz-span="data-wiz-span" style="color:rgb(255, 0, 0);">x.x</span><span>-all.zip</span></div></blockquote><blockquote><div><span data-wiz-span="data-wiz-span" style="color:rgb(51, 102, 255);">网络包</span>：https://services.gradle.org/distributions/<span>gradle-</span><span data-wiz-span="data-wiz-span" style="color:rgb(255, 0, 0);">x.x</span><span>-all.zip</span></div></blockquote></blockquote><blockquote></blockquote><blockquote></blockquote><blockquote><br></blockquote><blockquote><blockquote><div><span data-wiz-span="data-wiz-span" style="color:rgb(255, 104, 32);">Remark</span>：</div></blockquote></blockquote><blockquote><blockquote><blockquote><div><span>gradle-</span><span data-wiz-span="data-wiz-span" style="color:rgb(255, 0, 0);">x.x</span><span>-all.zip 中的&nbsp;</span>x.x 为版本号，以实际下载的为准。</div></blockquote></blockquote><blockquote><blockquote><div>注意，本地包的路径要放对。</div></blockquote></blockquote></blockquote><div><blockquote><br></blockquote><div style="text-align: left;"><b style="font-size: 1.167rem;">1.2 检查配置：</b></div></div></div><div>将环境变量中配置的地址的解析结果，即实际地址放到浏览器中测试，如果能下载表示 OK。</div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h3 style="text-align: left;"><span data-wiz-span="data-wiz-span">2. Maven 仓库：</span></h3><div>推荐使用真正的全局配置来所有 Gradle 项目的 Maven 仓库，详见<span>见上面的内容：</span></div><div><ul><li>《2、配置核心代码 &gt; 》</li><li>《3、配置作用范围 &gt; 3.2、Gradle 项目 &gt; 3.2.2、全部 Gradle 项目》</li></ul></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h3>3. 附：为 Cordova 指定 Gradle 下载地址的来龙去脉</h3><h3 style="font-size:1.25rem;"><div><br></div></h3><div><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;"><b>3.1 起因：</b></span></div><div><br></div><div><b>为什么要为 Cordova 指定 Gradle 下载地址？</b></div><div>因为如果只是配置环境变量，打包工具中的 Cordova 不会使用它，而是自己重新下载，<span>若要 ，</span><span>Cordova<span>&nbsp;使用它，就需要修改它的配置文件为它指定我们下好的 Gradle。</span></span></div><div><div><br></div><div><div><br></div><div><br></div></div></div><div><br></div><div style="text-align: left;"><b style="font-size:1.167rem">3.</b><b></b><b style="font-size:1.167rem">2、</b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">做法：</span></b></div><div><br></div><div><b style="font-size:1.063rem"><span data-wiz-span="data-wiz-span" style="font-size: 1.125rem;"><b style="font-size: 1.167rem;">3.</b><b style="font-size: 1rem;"></b><b style="font-size: 1.167rem;">2.1、</b>方法一：指定本地 Gradle zip 包的下载地址</span></b></div></div><blockquote><div><div><div><span>把本地 Gradle zip 包放到 Cordova 工程中</span></div></div></div><div><div><div><span>这是“</span><span>真の指定本地 Gradle ”的方法。</span></div></div></div><div><div><div>优点：Cordova 不会又在&nbsp;<span>GRADLE_USER_HOME<span>&nbsp;复制一份<span data-wiz-span="data-wiz-span" style="background-color: rgb(255, 255, 0);">（有待确认）</span></span></span></div></div></div><div><div><div>弊端：当你重置 platform（如 Android、iOS）时，Gradle zip 会随着旧 <span>platform 文件一起被</span>删除，这时你又得重新配置一遍。</div></div></div></blockquote><div><div><div><br></div></div></div><blockquote><div><div><div><br></div></div></div></blockquote><div><div><div><b>具体做法：</b></div></div></div><blockquote><div><div><div><div><br></div></div></div></div></blockquote><div><div><ul><li><b>版本一：</b></li></ul></div></div><blockquote><blockquote><div><div><span>（1）把本地下好的&nbsp;</span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">Gradle zip&nbsp;包</span><span>放入到与 Wrapper 目录同级的 Gradle 目录中，如下图，具体路径如下：</span></div></div></blockquote></blockquote><div><div><div><blockquote><blockquote></blockquote></blockquote></div></div></div></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638289740401_6908" class="wiz-code-container"><textarea style="display:none;">%Cordova_Project_Home%/platforms/android/gradle/</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638289740401_6908"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 32px; min-width: 376px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">%Cordova_Project_Home%/platforms/android/gradle/</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="height: 62px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><div><div><div><div><div><div style="text-align: center;"><div><div><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/e9ead137-48c7-4074-96ff-0b89ef993f4f.png"></div></div></div></div><div style="text-align: center;">图 - Gradle 目录</div><div style="text-align: center;"><br></div><div style="text-align:center"><img src="部署 Cordova 所需的工具、环境的详细说明_files/0b3d6f2c-229a-47de-8525-91f791206498.png"></div><div style="text-align:center">图 - 我的 Gradle 目录</div><div style="text-align:center"><br></div></div></div></div></div></div><blockquote><div><div><div><div><div><div><br></div></div></div></div></div></div><div><div><div><div><div><div>（2）进入到 Cordova 项目的 <span>Builder<span>&nbsp;</span></span>目录中，即 platform 里的&nbsp;<span>builders 目录（如下图），具体路径如下：</span></div></div></div></div></div></div></blockquote><div><div><blockquote><blockquote></blockquote></blockquote></div></div></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638259147185_1905" class="wiz-code-container"><textarea style="display:none;">%Cordova_Project_Home%/platforms/android/cordova/lib/builders/</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638259147185_1905"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 32px; min-width: 484px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">%Cordova_Project_Home%/platforms/android/cordova/lib/builders/</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="height: 62px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><blockquote><div><div><blockquote><blockquote><div style="text-align: left;"><span>修改&nbsp;</span><span>Builder&nbsp;</span><span>目录</span><span>目录中的 </span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">ProjectBuilder.js</span><span>&nbsp;或 </span><span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">GradleBuilder.js</span><span>&nbsp;或 </span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">StudioB</span><span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">uilder.js</span><span>&nbsp;（如下图） ，把 <span data-wiz-span="data-wiz-span" style="background-color:rgb(127, 127, 127);color:rgb(255, 255, 255);">distributionUrl</span>&nbsp;中的 URL 指向刚放好的&nbsp;</span><span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">Gradle zip&nbsp;包</span><span>。或者直接用</span><span>&nbsp;</span><span data-wiz-span="data-wiz-span" style="background-color: rgb(127, 127, 127); color: rgb(255, 255, 255);">distributionUrl</span><span>&nbsp;</span><span>中引用的环境变量 </span><span style="color:rgb(255, 255, 255);background-color:rgb(127, 127, 127)" data-wiz-span="data-wiz-span">CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span><span> 来指向这个&nbsp;</span><span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">Gradle zip&nbsp;包</span><span>。</span></div></blockquote></blockquote></div></div></blockquote><div><div><blockquote><blockquote><div><font></font></div></blockquote></blockquote></div></div></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638289581418_9293" class="wiz-code-container"><textarea style="display:none;"># 方式一：修改 ProjectBuilder.js 或 GradleBuilder.js 或 StudioBuilder.js 的 distributionUrl 

# 原始值
# var distributionUrl = process.env['CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'] || 'https\\://services.gradle.org/distributions/gradle-4.1-all.zip';
# 改为文件相对路径      注意，这里使用的是上级路径，因为相对的是 Wrapper 目录的里面
var distributionUrl = process.env['CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'] || '../gradle-4.1-all.zip';
# 改为文件绝对路径      注意，这里使用的是绝对路径。冒号前加不加“\\”都可以。
var distributionUrl = process.env['CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'] || 'file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip';


# 方式二：设置环境变量 CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL

# 变量名：CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL
# 变量值：同上。即 '../gradle-4.1-all.zip' 或 'file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip' 。</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638289581418_9293"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="right: 0px; left: 0px; height: 18px; pointer-events: none; display: block;"><div style="height: 100%; min-height: 1px; width: 1184px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 344px; min-width: 1153.84px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>14</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方式一：修改 ProjectBuilder.js 或 GradleBuilder.js 或 StudioBuilder.js 的 distributionUrl </span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 原始值</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># var distributionUrl = process.env['CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'] || 'https\\://services.gradle.org/distributions/gradle-4.1-all.zip';</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 改为文件相对路径      注意，这里使用的是上级路径，因为相对的是 Wrapper 目录的里面</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">var distributionUrl <span class="cm-operator">=</span> process.env[<span class="cm-string">'CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'</span>] || <span class="cm-string">'../gradle-4.1-all.zip'</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 改为文件绝对路径      注意，这里使用的是绝对路径。冒号前加不加“\\”都可以。</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">var distributionUrl <span class="cm-operator">=</span> process.env[<span class="cm-string">'CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'</span>] || <span class="cm-string">'file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip'</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方式二：设置环境变量 CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 变量名：CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 变量值：同上。即 '../gradle-4.1-all.zip' 或 'file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip' 。</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 344px;"></div><div class="CodeMirror-gutters" style="height: 374px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><blockquote><div><div><blockquote><blockquote><div><blockquote><blockquote><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);color:rgb(255, 255, 255);">Warning：</span></blockquote></blockquote></div></blockquote></blockquote></div></div><div><div><blockquote><blockquote><div><blockquote><blockquote><blockquote><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);color:rgb(255, 255, 255);">注意，在环境变量里配置绝对路径时，冒号前不可以加“\\”。加了就会变成相对地址拼在 Wrapper 路径的后面。</span></blockquote></blockquote></blockquote></div></blockquote></blockquote></div></div><div><div><blockquote><blockquote><div><br></div></blockquote></blockquote></div></div></blockquote><div><div><blockquote><blockquote><div><div><div><font><span data-wiz-span="data-wiz-span"><blockquote><blockquote></blockquote></blockquote></span></font></div></div><blockquote></blockquote></div></blockquote></blockquote></div></div><blockquote><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/9ed65035-ca1a-4442-a788-c2968fdf3fb5.png"></div><div style="text-align: center;"><span>图 - 我的 builders</span></div></blockquote><div><div><blockquote><blockquote><div><br></div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/63c00b39-9bf4-41b1-af47-8a1124ca44da.jpg"><br></div><div style="text-align: center;"><div>图 - 别人的 builders</div></div></blockquote></blockquote></div></div><div><div><div style="text-align: left;"><br></div></div></div><blockquote><div><div style="text-align: left;"><br></div></div><div style="text-align: left;"><div><div><div><b style="background-color:rgb(60, 179, 113);color:rgb(255, 255, 255);">Tips：</b></div></div></div></div><div style="text-align: left;"><blockquote><font color="#ffffff"><span style="background-color: rgb(60, 179, 113);">&nbsp;ProjectBuilder.js 或 GradleBuilder.js 或 StudioBuilder.js 有哪个就改哪个，如果都有就都改，因为目前还不确定到底会用哪个，是只用一个还是全都用。</span></font></blockquote></div><div><div><div><br></div></div></div><div><div><div><b>Ref：</b></div></div></div></blockquote><blockquote><blockquote><div><div><a href="https://juejin.cn/post/6861893112806801421" style="text-decoration-skip-ink: none;">《掘金 - Cordova使用本地gradle打包Android》</a></div><div><a href="https://www.codenong.com/37125496/">《Cordova构建更改gradle-wrapper.properties文件中的distributionUrl》</a><br></div></div></blockquote><blockquote><div><div><a href="http://www.noobyard.com/article/p-ggxfgdwe-mx.html">《noobyard - 使用本地Gradle版本》</a></div><div><a href="https://www.jianshu.com/p/9595eccac3d1">《简书 - Ionic打包过程下载Gradle失败的解决方法》</a></div><div><a href="https://cordova.axuer.com/docs/zh-cn/6.x/guide/platforms/android/">《axuer - Cordova - Android平台指南》</a></div><div><a href="https://stackoverflow.com/questions/47967182/automatic-gradle-download-instead-of-local-gradle-in-cordova">《stackoverflow - 自动gradle下载而不是cordova中的本地gradle<span>》</span></a></div><div><br></div></div></blockquote></blockquote><div><div><div><br></div><div><br></div><div><br></div></div></div><div><div><div><b style="font-size:1.063rem"><span data-wiz-span="data-wiz-span" style="font-size: 1.125rem;"><b style="font-size: 1.063rem;"><span data-wiz-span="data-wiz-span" style="font-size:1.125rem;"><b style="font-size: 1.167rem;">3.</b><b style="font-size: 1rem;"></b><b style="font-size: 1.167rem;">2.2、</b></span></b>方法二：指定远程 Gradle zip&nbsp;包<b style="font-size: 1.063rem;"><span data-wiz-span="data-wiz-span" style="font-size:1.125rem;">的下载地址</span></b></span></b></div></div></div><blockquote><div><div><div><span>这个方法比方法一简单得多，不用下包、挪包、确认路径，直接给&nbsp;</span><span>distributionUrl&nbsp;</span><span>或者引用的环境变量</span><span>一个 zip 包的新的高速的 URL。</span></div></div></div><div><div><div><br></div><div><br></div></div></div></blockquote><div><div><div><b>具体做法：</b></div></div></div><blockquote><div><div><div><div><div><div><div><div><div style="text-align: left;">（1）和方法一的第二步一样，<span>修改&nbsp;</span><span>Builder&nbsp;</span><span>目录</span><span>目录中的 </span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">ProjectBuilder.js</span><span>&nbsp;或 </span><span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">GradleBuilder.js</span><span>&nbsp;或 </span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">StudioB</span><span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">uilder.js</span><span>&nbsp;（如下图） ，把 <span data-wiz-span="data-wiz-span" style="background-color:rgb(127, 127, 127);color:rgb(255, 255, 255);">distributionUrl</span>&nbsp;中的 URL 或者 </span><span style="background-color:rgb(127, 127, 127);color:rgb(255, 255, 255)" data-wiz-span="data-wiz-span">distributionUrl</span><span>&nbsp;</span><span>中引用的环境变量 </span><span style="color:rgb(255, 255, 255);background-color:rgb(127, 127, 127)" data-wiz-span="data-wiz-span">CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span><span>&nbsp;</span><span>指向&nbsp;</span><span>zip 包的新的高速的 URL</span></div></div></div></div></div></div></div></div></div><div><div><div style="text-align: left;"><span>刚放好的&nbsp;</span><span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">Gradle zip&nbsp;包</span><span>。或者直接用</span><span>&nbsp;</span><span>&nbsp;来指向这个&nbsp;</span><span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">Gradle zip&nbsp;包</span><span>。</span></div></div></div></blockquote><div><div><div><div><div><blockquote><blockquote><div><font></font></div></blockquote></blockquote></div></div></div></div></div></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638290383108_950" class="wiz-code-container"><textarea style="display:none;"># 方式一：修改 ProjectBuilder.js 或 GradleBuilder.js 或 StudioBuilder.js 的 distributionUrl 

# 原始值
# var distributionUrl = process.env['CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'] || 'https\\://services.gradle.org/distributions/gradle-4.1-all.zip';
# 改为文件相对路径      注意，这里使用的是上级路径，因为相对的是 Wrapper 目录的里面
var distributionUrl = process.env['CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'] || '../gradle-4.1-all.zip';
# 改为文件绝对路径      注意，这里使用的是绝对路径。冒号前加不加“\\”都可以。
var distributionUrl = process.env['CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'] || 'file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip';


# 方式二：设置环境变量 CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL

# 变量名：CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL
# 变量值：同上。即 '../gradle-4.1-all.zip' 或 'file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip' 。</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638290383108_950"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="right: 0px; left: 0px; height: 18px; pointer-events: none; display: block;"><div style="height: 100%; min-height: 1px; width: 1184px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 344px; min-width: 1153.84px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>14</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方式一：修改 ProjectBuilder.js 或 GradleBuilder.js 或 StudioBuilder.js 的 distributionUrl </span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 原始值</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># var distributionUrl = process.env['CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'] || 'https\\://services.gradle.org/distributions/gradle-4.1-all.zip';</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 改为文件相对路径      注意，这里使用的是上级路径，因为相对的是 Wrapper 目录的里面</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">var distributionUrl <span class="cm-operator">=</span> process.env[<span class="cm-string">'CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'</span>] || <span class="cm-string">'../gradle-4.1-all.zip'</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 改为文件绝对路径      注意，这里使用的是绝对路径。冒号前加不加“\\”都可以。</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">var distributionUrl <span class="cm-operator">=</span> process.env[<span class="cm-string">'CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL'</span>] || <span class="cm-string">'file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip'</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 方式二：设置环境变量 CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class="CodeMirror-line" role="presentation"></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 变量名：CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 变量值：同上。即 '../gradle-4.1-all.zip' 或 'file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip' 。</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 344px;"></div><div class="CodeMirror-gutters" style="height: 374px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><div><div><div><div><div><blockquote><blockquote><div><div><div><font><span data-wiz-span="data-wiz-span"><blockquote><blockquote></blockquote></blockquote></span></font></div></div><blockquote><blockquote></blockquote></blockquote></div></blockquote></blockquote></div></div></div></div></div><blockquote><blockquote><blockquote><blockquote><div><div><div><br></div></div></div></blockquote></blockquote></blockquote><div><div><div><div><div><b style="background-color:rgb(60, 179, 113);color:rgb(255, 255, 255);">Tips：</b></div></div></div></div></div><div><div><blockquote><div><div><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(60, 179, 113);color:rgb(255, 255, 255);">经实测，方法一和方法二而一样，虽然指定了本地文件，但是其实只是指定了一个下载地址，换句话说就是复制文件的地址，并不是直接使用指定路径上的文件。并且，方法一之所以才把文件放在特定的位置，就是因为它用的相对路径。如果指定一个绝对路径，就无所谓文件放在哪了。</span></div></div></div></blockquote></div></div><div><div><div><div><div><br></div></div></div></div></div></blockquote><div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b style="font-size:1.167rem">3.</b><b></b><b style="font-size:1.167rem">3、</b><b style="font-size:1.167rem"><span data-wiz-span="data-wiz-span">本质：</span></b></div><div><hr><br></div><div><div><div><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;"><b>3.</b><b style="font-size: 1rem;"></b><b>3.1、</b>关于网上这些指定本地 Gradle 方法的本质：</span></b></div></div></div></div><blockquote></blockquote><div><div><div><div><span data-wiz-span="data-wiz-span" style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);"><b><br></b></span></div><div><span data-wiz-span="data-wiz-span" style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);"><b>Attention：</b></span></div></div></div></div><blockquote><blockquote></blockquote></blockquote><blockquote><div><div><div><div><span data-wiz-span="data-wiz-span" style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 153);">CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL（或 distributionUrl ）</span><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);color:rgb(127, 255, 212)"> </span><span data-wiz-span="data-wiz-span" style="background-color:rgb(255, 0, 0);color:rgb(255, 255, 255)">设置的并不是 Gradle 的存放路径，而是下载地址，哪怕是设置为本地文件。</span></div></div></div></div></blockquote><div><div><div><div><br></div></div></div></div><div><div><div><div>网上指定 Gradle 的方法说的大都是改下载地址，而不是存放地址（即直接使用地址）。</div><div>结合现在的经验，我推测：</div></div></div></div><blockquote><div><div><div><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(127, 127, 127);color:rgb(255, 255, 255)">Cordova 在 Build 阶段（执行命令&nbsp;cordova build android）时需要用到 Gradle，这时 Cordova 会先去变量 GRADLE_USER_HOME（user home下的".gradle"目录，如 C:\Users\Administrator\.gradle）找解压的 Gradle 文件，找不到文件就找 zip 包，找不到 zip 包就用变量 distributionUrl 指定的路径去下载（或复制）zip 包到这儿来，distributionUrl&nbsp;还下载失败的话 Cordova 程序就报错终止。</span></div></div></div></div></blockquote><div><div><div><div style="text-align: left;"><span>根据上述推测，结合&nbsp;</span><span>gradle-wrapper.properties 内容分析，可推测出，</span><span>&nbsp;Cordova 下载、解压、使用 </span><span>Gradle<span>&nbsp;文件的位置</span></span><span>是那个变量&nbsp;</span><span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">GRADLE_USER_HOME</span> 决定的，而它影响着两个关键的变量 </span><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">distributionBase</span><span>、</span><span style="color: rgb(255, 104, 32);" data-wiz-span="data-wiz-span">zipStoreBase</span><span>。这两个关键变量应该直接决定了 Gradle 位置，从名字可以推出，&nbsp;</span><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">distributionBase</span><span> 决定 </span><span style="color: rgb(255, 104, 32);" data-wiz-span="data-wiz-span">Gradle</span><span> 的 </span><span style="color: rgb(255, 104, 32);" data-wiz-span="data-wiz-span">zip</span><span> 包的解压和使用的位置，</span><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">zipStoreBase</span><span>&nbsp;</span><span>决定 Gradle 的 zip 包下载后存放的位置。还有一个 </span><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">distributionUrl </span><span>，则是 Gradle zip 包的下载地址。由于配置文件中&nbsp;</span><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">distributionBase</span><span> 和&nbsp;</span><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">zipStoreBase</span><span> 位置是相同的，因此 Gradle zip 包的保存、解压、使用的位置都是相同的。由此可以推断，要真正指定 Gradle 得修改 Cordova 工程中&nbsp;</span><span>Gradle<span>&nbsp;</span></span><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">Wrapper</span><span> 的配置文件</span><span>&nbsp;</span><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">gradle-wrapper.properties</span><span>。</span></div><div><span><br></span></div><div><span><b>Ref：</b></span></div></div></div></div><blockquote><div><div><div><div><a href="https://segmentfault.com/a/1190000011726133">《<span style="color: rgb(0, 0, 0);">segmentfault -&nbsp;</span><span style="color: rgb(0, 0, 0);">cordova搭建环境》</span></a></div></div></div></div></blockquote><div><div><div><div><br></div><div><br></div><div><span><br></span></div><div style="text-align: left;"><span><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;"><b style="font-size: 1rem;"><span data-wiz-span="data-wiz-span" style="font-size:1.167rem;"><b>3.</b><b style="font-size: 1rem;"></b><b>3.2、</b></span></b>关于 GRADLE_USER_HOME：</span></b></span></div><div style="text-align: left;"><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">GRADLE_USER_HOME</span><span> 是一个环境变量，它用于 Gradle Wrapper 插件，它</span><span>决定 Gradle Wrapper 运行</span><span>（执行 project/gradle/gradle-rapper.jar）</span><span>时所下载、保存、使用的 Gradle 的主要位置（次要位置是 distributionPath 等变量指定的路径 “</span><span>wrapper/dists/</span><span>”）。</span></div><div style="text-align: left;"><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">GRADLE_USER_HOME</span><span>&nbsp;</span><span>可配可缺省，缺省就用用户目录，并追加一个“.gradle”子目录，如 “%User_Home%/.gradle”，如下图；配置就用配置的路径，但什么子目录都不追加，如 “D:\1_System\1_Installation\2_SDT\Gradle\Gradle_User_Home</span><span>”，如下图。</span></div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/5f9f6b7c-3a1a-4612-bb96-9e35f957a249.png"></div><div style="text-align: center;">图&nbsp; -&nbsp;<span>GRADLE_USER_HOME 缺省时 Gradle 默认路径上的内容</span></div><div style="text-align: center;"><br></div></div><div style="text-align: center;"><span><img src="部署 Cordova 所需的工具、环境的详细说明_files/7ccfda3b-a12e-4e82-8356-20d4ba10bf2e.png"><br></span></div><div style="text-align: center;"><span>图 - </span><span>GRADLE_USER_HOME<span>&nbsp;&nbsp;</span></span><span>环境变量</span></div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/f7d52b16-6655-44d7-8fdc-b0c81c94f21c.png"></div><div style="text-align: center;"><span>图 -<span>&nbsp;</span></span><span>GRADLE_USER_HOME<span>&nbsp;路径上的内容</span></span></div><div><br></div></div><div><span><b>Ref：</b></span></div></div></div></div></div><blockquote><div><div><div><div><div><a href="https://blog.csdn.net/IOT_AI/article/details/106617626">《<span style="color: rgb(0, 0, 0);">csdn -&nbsp;</span><span style="color: rgb(0, 0, 0);">IDEA如何正确配置Gradle? GRADLE_USER_HOME 和 Gradle user home的区别</span>》</a></div></div></div></div></div></blockquote><div><div><div><div><br></div><div><span><br></span></div><div><span><br></span></div><div><span><br></span></div><div><br></div><div style="text-align: left;"><b style="font-size:1.167rem"><b style="font-size: 1rem;"><span data-wiz-span="data-wiz-span" style="font-size:1.167rem;"><b style="font-size:1rem;"><span data-wiz-span="data-wiz-span" style="font-size:1.167rem;"><b>3.</b><b style="font-size:1rem;"></b><b>3.3、</b></span></b></span></b>关于&nbsp;</b><b></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL：</span></b></div><div style="text-align: left;"><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span>&nbsp;是一个<b>环境变量</b>，它用于 Cordova 中的 <span style="color:rgb(255, 255, 255);background-color:rgb(127, 127, 127)" data-wiz-span="data-wiz-span">Gradle Wrapper 插件</span>，它决定 Wrapper 所需要的&nbsp;<span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">Gradle(</span><span style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">zip 包)&nbsp;</span>的完整的<b>下载地址</b>&nbsp;</div><div style="text-align: left;"><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span><span>&nbsp;指定的地址下载的 </span><span style="color:rgb(255, 255, 255);background-color:rgb(127, 127, 127)" data-wiz-span="data-wiz-span">Gradle(zip 包)&nbsp;</span><span>会存放到&nbsp;</span><span><span data-wiz-span="data-wiz-span" style="background-color: rgb(127, 127, 127); color: rgb(255, 255, 255);">GRADLE_USER_HOME</span>&nbsp;指定的路径的<b>子路径</b>里。</span></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b style="font-size:1.167rem"><b style="font-size: 1rem;"><span data-wiz-span="data-wiz-span" style="font-size:1.167rem;"><b style="font-size:1rem;"><span data-wiz-span="data-wiz-span" style="font-size:1.167rem;"><b>3.</b><b style="font-size:1rem;"></b><b>3.4、</b></span></b></span></b>关于&nbsp;</b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">gradle-wrapper.properties：</span></b></div><div style="text-align: left;"><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">gradle-wrapper.properties</span><span> 是 </span><span style="color:rgb(255, 255, 255);background-color:rgb(127, 127, 127)" data-wiz-span="data-wiz-span">Gradle Wrapper 插件</span><span>（</span><span><span data-wiz-span="data-wiz-span" style="color: rgb(51, 102, 255);">gradle-wrapper.jar</span>）的配置文件， 它可以为&nbsp;</span><span>Gradle Wrapper 插件指定 </span><span style="color:rgb(255, 255, 255);background-color:rgb(127, 127, 127)">Gradle(</span><span style="color:rgb(255, 255, 255);background-color:rgb(127, 127, 127)">zip 包)&nbsp;</span><span>下载、保存、使用的<span data-wiz-span="data-wiz-span" style="color: rgb(51, 102, 255);">源地址和目的地址</span>（主路径）。</span></div><div><div style="text-align: left;"><span>网上的人说的这个文件是在 </span><span style="color:rgb(51, 102, 255)" data-wiz-span="data-wiz-span">platform</span><span> 里，如下图 ，而我在</span><span>&nbsp;</span><span data-wiz-span="data-wiz-span" style="color: rgb(51, 102, 255);">node_modules</span><span> 也发现了，二者内容完全一致，我推测 </span><span data-wiz-span="data-wiz-span" style="color: rgb(51, 102, 255);">platform</span><span> 下面的是&nbsp;</span><span style="color:rgb(51, 102, 255)" data-wiz-span="data-wiz-span">node_modules</span><span>&nbsp;复制过来的，可能因为要改&nbsp;</span><span style="color:rgb(255, 104, 32)" data-wiz-span="data-wiz-span">gradle-wrapper.properties</span><span> 的内容，而</span><span>&nbsp;</span><span style="color:rgb(51, 102, 255)" data-wiz-span="data-wiz-span">node_modules&nbsp;</span><span>内容肯定是不适合动的。</span></div><div><div><div style="text-align: center;"><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/0b53b4bd-7cbc-4ad7-a97d-55dfb9d0df2a.png"></div></div><div style="text-align: center;"><span>图 - platform 中 gradle wrapper 的&nbsp;</span><span>gradle-wrapper.properties</span></div></div></div><div style="text-align: center;"><span><br></span></div><div><div style="text-align: center;"><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/5e938291-39e3-41ba-9994-d215817713b6.png"></div></div><div style="text-align: center;">图 - node_modules 中 gradle wrapper 的&nbsp;<span>gradle-wrapper.properties 及其内容</span></div><div style="text-align: center;"><span><br></span></div><div><div><div><br></div></div></div></div></div></div><div><div><br><br></div><div><br></div><div><div><br></div><div style="text-align: left;"><b style="font-size:1.167rem">3.</b><b></b><b style="font-size:1.167rem">4、</b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">疑问：</span></b></div></div></div><div><hr><br></div><div><b style="font-size:1.5rem">Q：</b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">为什么 https 中冒号前面要用 2 个反斜杠“\”，不带可不可以？</span></b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>我推测，这是因为该字符串要经历正则筛选，而冒号似乎是正则表达式的特殊字符，要用反斜杠转义，而且字符串里两个反斜杠解析为正则表达式时会变成一个，一个就等于没有，所以写了两个。实际原因有待验证。</div><div><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/681bb44a-2cda-4f39-b952-ec0e93ae382f.png"></div><div>经过实测后可以肯定的是，<span data-wiz-span="data-wiz-span" style="background-color: rgb(255, 0, 0); color: rgb(255, 255, 255);">冒号前面加不加&nbsp;“\\” 要看情况，在&nbsp;distributionUrl&nbsp;中加不加都可以，但是在环境变量中就一个都不能加。</span></div></div><div><span>如下图，Windows 环境变量如果配 1个反斜杠，在 Node 中拿到的字符串会是 2 个反斜杠。</span><br></div><div style="text-align: center;"><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/cf396444-80ae-483a-a285-9d5f8598e560.png"></div><div>图 -&nbsp;<span>环境变量配置反斜杠</span></div></div><div style="text-align: center;"><div><br></div></div><div style="text-align: center;"><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/2db05568-69fd-4189-aade-49c7893fdac5.png"></div><div><span>图 -&nbsp;</span><span>Node 中获取到的环境变量</span></div></div><div><div><br></div></div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b style="font-size:1.167rem">为什么&nbsp;GradleBuilder.js&nbsp;每次打包时都会恢复？</b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>因为打包工具打包是每次都从头打包，这样就会导致文件被清除掉重新下载。</div></div><blockquote><div><div>如果直接执行生成命令 cordova build android，就不会恢复了。</div></div></blockquote><div><div><br></div><div><b>Ref：</b></div></div><blockquote><div><div><a href="https://blog.csdn.net/bing103425/article/details/82895615">《csdn - Cordova更改Gradle版本》</a></div></div><div><a href="https://cordova.axuer.com/docs/zh-cn/6.x/guide/platforms/android/" style="text-decoration-skip-ink: none;">《axuer - Cordova - Android平台指南》</a></div></blockquote><div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><b style="font-size:1.188rem"><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><span style="font-size: 1.167rem;" data-wiz-span="data-wiz-span"><b>为什么删除 gradle 包的时候提示文件夹被占用？</b></span></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>如果在<span data-wiz-span="data-wiz-span">删除 grad</span>le 包的时候如果弹出文件夹被占用，那么十有八九是个 Java 程序占用着，在进程中知道 java.exe 的程序干掉就可以了。</div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/e87da0e8-c222-4a42-9fc3-5879977479fa.png"></div><div style="text-align: center;">图 - gradle 文件夹被占用</div><div><br></div></div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">给 Cordova 指定 Gradle 的本地路径或 URL 时，冒号前面需要加 2 个反斜杠吗？</span></b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>distributionUrl 中 的 URL 如果使用 file 协议指定一个绝对路径上的文件，这时，需要模仿原来 URL 的写法，给冒号前面需要加 2 个反斜杠吗？</div></div><blockquote><div><div><span>我们试一试。不过要注意，不能重新打包，要直接执行 cordova build android 命令。</span></div></div><div><div><span>那么先加上试试。如下图：</span></div></div></blockquote><div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/20af4508-fe33-4be0-8437-bb855a2a6b83.png"></div><div style="text-align: center;">图 -&nbsp;<span>distributionUrl<span>&nbsp;修改 URL</span></span></div></div></div><blockquote><div><div><div>不行。如下图。</div></div></div></blockquote><div><div><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/f099245c-44e8-46ac-afac-bf36ac117123.png"></div><div style="text-align: center;"><span>图 - 测试结果</span></div><div><br></div></div></div><blockquote><div><div><div>那就不加。</div></div></div><div><div>不加的结果一样，不行。</div></div><div><div>WTF！这是什么鬼。</div></div><div><div>改环境变量有效，改 JS 文件就无效？</div></div><div><div>这时我突然想到还有一个 JS 文件有相同的内容，改改试试。</div></div><div><div>一改就成功，再重新测试一遍，发现这个地方加不加反斜杠都无所谓。但是，环境变量里是一个都不能有，有就出问题。</div></div><div><div><br></div></div><div><div><div><span>到这里，我们会疑惑这里的两个反斜杠的意义到底是什么呢？</span></div></div></div><div><div><div><span>还是先别管它了。</span></div></div></div></blockquote><div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">文件绝对路径中的“file://”是什么？：</span></b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>这个 file 是本地文件传输协议。为什么是本地？因为不带主机名。</div></div><blockquote><div><div>为什么是三条杠？因为没有主机，所以<span><span>&nbsp;</span>// 后直接接 “/...” 这样的路径了。</span></div></div><div><div><span>file 对应的远程协议是 ftp，即远程文件传输协议。</span></div></div><div><div><span>file 不支持跨域，也不像 http 那样需要解析，因此 file 不能用于网站测试，也无法识别 es6 的import 语法。</span></div></div></blockquote><div><div><br></div><div><b>Ref：</b></div></div><blockquote><div><div><a href="https://www.cnblogs.com/lishanlei/p/9327646.html">《cnblogs - 浅谈FIle协议与Http协议及区别 》</a></div></div></blockquote><div><div><br></div></div><div><br></div><div><br></div><div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b></b><b style="font-size:1.167rem">为什么 distributionUrl 中的 URL 要设置为“从</b><b></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">上级目录中找 Gradle zip 包”？</span></b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A</span></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">：</span></b>查看目录结构和内容，发现放 Gradle zip 包 的目录的下级目录就一个——wrapper，这个目录里就一个应用 gradle-wrapper.jar。从 jar 包名字看</div></div><blockquote><div><div>应该是个 Wrapper ，这应该就是我们依据<a href="https://blog.csdn.net/qq_41806718/article/details/108366649">《csdn - cordova 指定使用本地gradle版本》</a>从一开就在找的 Wrapper 了。</div></div></blockquote><div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/8b643323-5cf5-4799-b87a-0b264d5e3fb0.png"></div><div style="text-align: center;">图 - 上级目录</div><div><br></div></div><div><b>根据网上教程推测：</b></div></div><blockquote><div><div>如果 builders 目录有 ProjectBuilder.js，则 Gradle zip 包和 ProjectBuilder.js 放在一起。</div></div><div><div>如果&nbsp;<span>builders<span>&nbsp;</span></span><span>目录</span>没有&nbsp;<span><span>&nbsp;</span>ProjectBuilder.js，而是 GradleBuilder.js，则 Gradle zip 包和 Wrapper 的目录放在一起（与</span><span>目录</span><span>同级）。</span></div></div></blockquote><div><div><br></div><div><b>推测检验：</b></div></div><blockquote><div><div>执行不同路径的 JS 时，相对路径是相对的谁？</div></div><div><div>相对路径，就是相对于自己的目标文件位置。直白点说，就是代码在哪个文件里，就是相对的哪个文件。</div></div><div><div>我们再回过头去看 Gradle zip 的相对路径，一个相对的是 ProjectBuilder.js，一个相对的是 gradle-wrapper.jar，那到底哪个是正确的？还是都是正确的？</div></div><div><div>实践证明后者是正确的，详见当前笔记《ProjectBuilder.js 与 GradleBuilder.js》</div></div></blockquote><div><div><br></div><div><br></div><div><br></div><div><div><div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">process.env 取的是当前系统的环境变量，那么该数据是一个数组吗？</span></b></div></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>不！是一个对象。如下图。</div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/eeb0ff48-f332-47e7-8f76-70d2fb552bf1.png"></div><div style="text-align: center;">图 - process.env 显示的数据</div><div><br></div></div><div><br></div></div></div><div><br></div><div><div><div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b></b><b style="font-size:1.167rem">gradle-wrapper.properties 和 </b><b></b><b style="font-size:1.167rem">ProjectBuilder.js&nbsp;</b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">可以真正意义上指定并使用本地 Gradle 吗？</span></b></div></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>gradle-wrapper.properties 可以，但不是完完全全的可以。 ProjectBuilder.js 是真的不行，<span>ProjectBuilder.js<span>&nbsp;只能指定下载路径。</span></span></div><div><span>gradle-wrapper.properties 虽然可以真正指定本地 Gradle，</span>但不完美，首先，它只能指定主路径，子路径由 Hash 生成，虽然<span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">生成后不会改变</span>，但是无法预知。其次，除非你不重新打包，否则该配置文件会在重头开始打包流程的情况下被恢复，改了也白改。完<span>美的做法是配置环境变量 GRADLE_USER_HOME。</span></div><div><br></div></div><div><br></div></div></div><div><br></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b></b><b style="font-size:1.167rem">指定</b><b></b><b style="font-size:1.167rem">本地 Gradle 时，到底是改</b><b style="font-size:1.167rem">&nbsp;gradle-wrapper.properties 还是&nbsp;</b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">ProjectBuilder.js ？</span></b></div><blockquote><div><span>详情：网上指定本地 Gradle 的方法里</span><span>有的让改 gradle-wrapper.properties，</span><span>有的让改 ProjectBuilder.js ？那么到底改哪个？</span></div></blockquote><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>你得<span>看是指定 Gradle 的什么地址，是下载的源地址还是目的地址（目的地址就是保存路径）。如果是源地址，那么都可以改，因为要改的是变量 distributionUrl 的取值，而二者都有。 如果是目的地址，那么只能&nbsp; gradle-wrapper.properties，因为要改的是普通变量 xxxBase、xxxPath，环境变量GRADLE_USE_HOME，而这些变量只有&nbsp;</span><span>gradle-wrapper.properties</span><span>&nbsp;里有。</span></div><div><span><br></span></div><div><div><b>Ref：</b></div></div><blockquote><div><div><a href="https://blog.csdn.net/qq_41806718/article/details/108366649" style="text-decoration-skip-ink:none;">《csdn - cordova 指定使用本地gradle版本》</a></div></div></blockquote><div><br></div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">网上教程里那些 gradle 相关的目录是 studio 下的吗？</span></b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>都是 Cordova 的工程下面的，跟 Studio 无关。</div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b style="font-size:1.5rem">Q：</b><b></b><b style="font-size:1.167rem">b</b><b></b><b style="font-size:1.167rem">uil</b><b style="font-size:1.167rem"></b><b style="font-size:1.167rem"></b><b style="font-size:1.167rem"></b><span style="font-size: 1.167rem;"><b></b></span><span style="font-size: 1.167rem;"><b><span data-wiz-span="data-wiz-span">d</span></b></span><b style="font-size:1.167rem"><span data-wiz-span="data-wiz-span">.gradle 中 Gradle 插件的版本应该指定为多少？</span></b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b><span>Gradle 插件和 Gradle 有版本对应关系，对应关系详见：</span></div><blockquote><div><div><a href="https://juejin.cn/post/6915214037697445896" style="text-decoration-skip-ink:none;">《掘金 - Android之Gradle和Gradle插件区别及联系》</a></div></div><div><div><a href="https://juejin.cn/post/6861893112806801421" style="text-decoration-skip-ink:none;">《掘金 - Cordova使用本地gradle打包Android》</a></div></div></blockquote><div><span>当前环境里 Gradle 插件的版本指定为 3.0.1，它</span><span>对应的 Gradle 正是 4.1，因此不用改。</span><br></div></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638256514433_9478" class="wiz-code-container"><textarea style="display:none;">classpath 'com.android.tools.build:gradle:3.0.1'</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638256514433_9478"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 32px; min-width: 376px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">classpath <span class="cm-string">'com.android.tools.build:gradle:3.0.1'</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="height: 62px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><div><br></div><div><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">Remark</span>：打包工具最初指定的版本是&nbsp;<span>4.10，不知为啥后来在使用过程中变成了 4.1。</span></div><div><br></div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">是否可以通过环境变量指定本地 Gradle ？</span></b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>可以这要看是那个环境变量，而且你要指定的是下载的源地址还是目的地址，详见当前笔记<u>《Q：指定本地 Gradle 时，到底是改 gradle-wrapper.properties 还是 ProjectBuilder.js ？》。</u></div><div style="text-align: left;"><span data-wiz-span="data-wiz-span" style="background-color: rgb(127, 127, 127); color: rgb(255, 255, 255);">distributionUrl</span><span>&nbsp;所引用环境变量的&nbsp;</span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 255, 255); background-color: rgb(127, 127, 127);">CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span><span>&nbsp;指定的是源地址。</span></div><div><span>环境变量&nbsp;</span>GRADLE_USER_HOME 指定的是目的地址，但也只是主路径，不是完全路径 。</div><div>这些环境变量都是系统环境变量，不是 Node 环境变量，可以在系统上设置。<span>例如可以在 CMD 上直接设置一个临时的。</span></div></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638257815444_3747" class="wiz-code-container"><textarea style="display:none;">set CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL=http://localhost/gradle-4.1-all.zip</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638257815444_3747"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 32px; min-width: 615px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">set</span> <span class="cm-def">CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span><span class="cm-operator">=</span>http://localhost/gradle-4.1-all.zip</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="height: 62px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/d5e8257a-5b2a-4af3-a1c2-b96aa7a56bb1.png"></div><div><b>Ref：</b></div></div><blockquote><div><div><a href="https://cloud.tencent.com/developer/article/1685513">《<span style="color: rgb(0, 0, 0);">tencent -&nbsp;</span><span style="color: rgb(0, 0, 0);">cordova run android 下载gradle报timeout</span>》</a></div></div></blockquote><div><div><br></div></div><div><br></div><div><br></div><div><div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b></b><b style="font-size:1.167rem">ProjectBuilder.js 与&nbsp;</b><b></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">GradleBuilder.js ？</span></b></div></div><div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>网上指定 Gradlle 路径的方法中，一种说修改&nbsp;<span>ProjectBuilder.js，另一种则说&nbsp;</span><span>GradleBuilder.js。那么到底修改哪个呢？它们有什么关系呢？</span></div></div></div><blockquote><div><div><div><span>我们来研究一下。</span></div></div></div><div><div><div>我们发现在 Cordova 项目中，<span>builders<span>&nbsp;目录中如果</span></span>有 ProjectBuilder.js，则没有&nbsp;<span>GradleBuilder.js；如果有 GradleBuilder.js，则没有&nbsp;</span><span><span>&nbsp;</span>ProjectBuilder.js。二者好像互不待见。</span></div></div></div><div><div><div><span>如下图（图1图2）我们分析他们的内容发现，他们的内容惊人的一致，除了声明方式略微不同，再就是注释&nbsp;</span><span>GradleBuilder.js 要多一段。这段注释的意思是“我们正在把 Gradle 从框架中复制出来。这是一个获取构建工作的脏补丁”。</span><span>我们先不管这段注释，</span><span>回到正题。既然二者内容一致，那说明很可能是版本不同造成的。那谁是新版？我推测&nbsp;</span><span>GradleBuilder 是新版的，理由是它是我最近用打包工具下的新的 platform 中的文件，而打包机以前的 platform 中是&nbsp;</span><span>ProjectBuilder.js。</span></div></div></div><div><div><div>因此我推测二者功能一致，只是版本不同引起的略微差异。</div></div></div><div><div><div>再来说一说二者里的相对路径。由于他们功能一致，所以在打包的时候，它们都会被执行，而它们里面的代码的相对路径应该都是一致的——相对它们自己。所以我认为 Gradle zip 包的相对路径也应该都是一样的、相对它们自己的。所以那个设置&nbsp;<span>Gradle zip 包的路径为&nbsp;</span>“上级目录” （如“../gradle-2.4-all.zip”）的方法应该是错误的。</div></div></div><div><div><div>关于上述观点中的相对路径，有实践证明，它是错误的，没错，是错误的，详见当前笔记<u>《Q：ProjectBuilder.js 与 GradleBuilder.js 中的相对路径到底是相对谁？》</u></div></div></div><div><div><div><span><br></span></div></div></div><div><div><div><span>另外我推测，打包工具可能是慧程研发人员从标准的 Cordova 工程修改而来的，变成了一个非标准的 Cordova 工程，所以有 ProjectBuilder.js，没有 GradleBuilder.js。</span></div></div></div></blockquote><div><div style="text-align: center;"><div><img src="部署 Cordova 所需的工具、环境的详细说明_files/19b55919-a833-453b-8ccf-153151d48b6d.png"></div></div><div style="text-align: center;"><div>图 1 - GradleBuilder.js 的内容</div></div><div style="text-align: center;"><br></div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/94336a9f-8285-4c51-bf61-4da9c780adcd.png"><br></div><div style="text-align: center;"><div><span>图 2 - ProjectBuilder.js&nbsp;</span><span>的内容</span></div></div><div style="text-align: center;"><div><br></div></div><div><b>Ref：</b></div></div><blockquote><div><div><a href="https://juejin.cn/post/6861893112806801421" style="text-decoration-skip-ink: none;">《掘金 - Cordova使用本地gradle打包Android》</a></div></div><div><div><br></div></div></blockquote><div><br></div><div><br></div><div><br></div><div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">ProjectBuilder.js 与 GradleBuilder.js 中的相对路径到底是相对谁？</span></b></div><div><b><span data-wiz-span="data-wiz-span" style="font-size:1.5rem;">A：</span></b>实测发现，在更改了这 2 个文件中的 distributionUrl 为 Gradle zip 包绝对路径后，由于路径不符合 Cordova 对独立路径的要求，于是 Cordova 把</div></div><blockquote><div><div>这个路径拼接在了一个路径后面，这个路径正是有些文章中提到的放 Gradle zip 包的目录，即 Wrapper 的目录，如下图。</div></div></blockquote><blockquote><div><div style="text-align: center;"><img src="部署 Cordova 所需的工具、环境的详细说明_files/16f4632b-0c90-47e2-9331-532a8349563b.png"></div></div><div style="text-align: center;">图 - 设置相对路径的结果</div><div style="text-align: center;"><br></div><div><div>因此可以断定，ProjectBuilder.js 与 GradleBuilder.js 中的相对路径相对的对象不是文件自己，而是 Wrapper 目录。</div></div><div>相对路径的相对对象确定了，那么使用什么样的相对路径就看你把文件放在哪了。个人建议就放在 Gradle 目录里，即与 Wrapper 目录同级，然后 <span>distributionUrl<span>&nbsp; 中</span></span>使用相对的上级路径。</div></blockquote><div><div><br></div></div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">打包工具的本质是什么？</span></b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>打包工具的本质就是一个 Cordova 工程，只是添加了一些自动化脚本进去了。你把 Cordova 搞明白，打包工具你就搞明白了。</div><div><br></div><div><br></div><div><br></div><div><br></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span></b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">Gradle zip 包中的 bin 和 all？</span></b></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>Gradle 发布的 zip 包两种风格：bin 和 all。bin 是编译后的二进制版，可直接运行，all 是完整版，等于 bin + 源码 + 文档，比 bin 大几十 M。</div><blockquote><div><span>安装 Gradle 时用 bin 包即可，不过 Cordova 要的包是 all 包，就让 Cordova 下 all 包，不用管它。</span></div></blockquote><div><br></div><div><b>Ref：</b></div><blockquote><div><a href="https://blog.csdn.net/qq_44381427/article/details/116521888">《<span style="color: rgb(0, 0, 0);">csdn - gradle版本中-bin与-all》</span></a></div><div><a href="https://www.jianshu.com/p/319dd45163bb">《<span style="color: rgb(0, 0, 0);">简书 - Gradle wrapper bin 和 all 区别》</span></a></div></blockquote><div><br></div><div><div><b><br></b></div><div><b><br></b></div><div><br></div></div><div><br></div><div><div><div><div><div style="text-align: left;"><b style="font-size:1.167rem">3.5、</b><b><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">总结：</span></b></div></div></div></div><blockquote></blockquote><div><div><div><hr><br></div><div><span><b>环境变量：</b></span></div></div></div></div><blockquote><div><div><div><div><b>CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</b>：</div></div></div></div></blockquote><blockquote><blockquote><blockquote><div><div><div><div>指定 Cordova 使用的 Gradle Wrapper 插件所使用的 Gradle 的下载地址（源地址）。</div></div></div></div></blockquote></blockquote></blockquote><blockquote><div><div><div><b>GRADLE_USER_HOME</b>：</div></div></div></blockquote><blockquote><blockquote><blockquote><div><div><div>指定 Gradle Wrapper 插件所使用的 Gradle 的下载、保存、使用地址（目的地址）。</div></div></div></blockquote></blockquote></blockquote><div><div><div><span><br></span></div></div></div><div><span><b>普通变量：</b></span></div><blockquote><div><b>distributionUrl</b>：</div></blockquote><blockquote><blockquote><blockquote><div>指定 Gradle Wrapper 插件所使用的 Gradle 的下载地址（源地址），会用<span>到&nbsp;</span><span>CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL。</span></div></blockquote></blockquote></blockquote><blockquote><div><b>distributionBase</b>：</div></blockquote><blockquote><blockquote><blockquote><div>指定 Gradle Wrapper 插件所使用的 Gradle 的解压、使用的主路径。</div></blockquote></blockquote></blockquote><blockquote><div><b>zipStoreBase</b>：</div></blockquote><blockquote><blockquote><blockquote><div>指定 Gradle Wrapper 插件所使用的 Gradle 的保存的主路径。</div></blockquote></blockquote></blockquote><blockquote><div><br></div><div><br></div><div><br></div><div><br></div></blockquote><div><b>指定地址（路径）的格式：</b></div><div><span><br></span></div><div><span><b>● 指定 Gradle Wrapper 插件所使用的 Gradle 的下载地址（源地址）的格式：</b></span></div></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638371869535_9667" class="wiz-code-container"><textarea style="display:none;">file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638371869535_9667"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 32px; min-width: 515px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="height: 62px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><blockquote><div>例如：</div></blockquote></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638371988837_6326" class="wiz-code-container"><textarea style="display:none;"># 普通变量
distributionUrl=file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip
# 环境变量
CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL=file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638371988837_6326"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none; right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 104px; min-width: 822.891px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 普通变量</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">distributionUrl</span><span class="cm-operator">=</span>file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 环境变量</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span><span class="cm-operator">=</span>file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="height: 134px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><div><span><br></span></div><div><span><b><span>●&nbsp;</span>指定 Gradle Wrapper 插件所使用的 Gradle 的保存、解压、使用的主路径的格式：</b></span><span><br></span></div></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638372137427_4886" class="wiz-code-container"><textarea style="display:none;">D:\1_System\1_Installation\2_SDT\Gradle\Gradle_User_Home</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638372137427_4886"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 32px; min-width: 438px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;">D:\1_System\1_Installation\2_SDT\Gradle\Gradle_User_Home</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="height: 62px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><blockquote><div>例如：</div></blockquote></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638371981852_7591" class="wiz-code-container"><textarea style="display:none;"># 环境变量
GRADLE_USER_HOME=D:\1_System\1_Installation\2_SDT\Gradle\Gradle_User_Home
# 普通变量（反对使用）
distributionBase=D:\1_System\1_Installation\2_SDT\Gradle\Gradle_User_Home</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638371981852_7591"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 104px; min-width: 568.891px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 环境变量</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">GRADLE_USER_HOME</span><span class="cm-operator">=</span>D:\1_System\1_Installation\2_SDT\Gradle\Gradle_User_Home</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 普通变量（反对使用）</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">distributionBase</span><span class="cm-operator">=</span>D:\1_System\1_Installation\2_SDT\Gradle\Gradle_User_Home</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="height: 134px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><div><br></div><div><br></div><div><br></div><div>为 Cordova 指定 Gradle 时，没有真正一步到位的并且完美方法。所谓指定 Gradle，无非是指定它的下载源地址和保存、使用的本地路径。无论源地址是远程的 http 还是本地的 file，Cordova 在最初时使用 Gradle 时都会去下载 Gradle，而保存的路径里会带有 Hash，这就是无法一步到位的原因。保存后先解压，再使用。这时，才能明确具体的 Gradle 路径。因此总结了一个指定 Gradle 的最佳实践。</div><div><br></div><div><br></div><div><br></div><div><br></div><h5><span><b><span data-wiz-span="data-wiz-span">最佳实践：</span></b></span></h5><div><span><br></span></div><div><span>设置两个环境变量来指定 Gradle，并且不要指定为自己安装的公共的 Gradle，就让 Gradle Wrapper 去下载</span></div></div><div data-mode="Shell" data-theme="eclipse" id="wiz_cm_1638373399527_6602" class="wiz-code-container"><textarea style="display:none;"># 环境变量 1：下载源地址
CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL=file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip
# 环境变量 2：下载目的地址
GRADLE_USER_HOME=D:\1_System\1_Installation\2_SDT\Gradle\Gradle_User_Home</textarea><wiz_code_mirror><div class="CodeMirror cm-s-eclipse" data-id="wiz_cm_1638373399527_6602"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 20px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; pointer-events: none;"><div style="min-width: 1px; height: 0px;"></div></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; pointer-events: none; right: 0px; left: 0px;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: 0px; border-right-width: 30px; min-height: 104px; min-width: 822.891px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="wiz-hide wiz_ wiz-hide wiz_CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 24px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 环境变量 1：下载源地址</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">CORDOVA_ANDROID_GRADLE_DISTRIBUTION_URL</span><span class="cm-operator">=</span>file:///D:/1_System/1_Installation/2_SDT/Gradle/gradle-4.1-all.zip</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 环境变量 2：下载目的地址</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class="CodeMirror-line" role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">GRADLE_USER_HOME</span><span class="cm-operator">=</span>D:\1_System\1_Installation\2_SDT\Gradle\Gradle_User_Home</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="height: 134px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></wiz_code_mirror></div><div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2>Gradle 的 .gradle 脚本：</h2><div><br></div></div><div><div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">1、自动执行的 .gradle 脚本：</span></b></div><div><span data-wiz-span="data-wiz-span"><br></span></div></div></div><blockquote></blockquote><div><span data-wiz-span="data-wiz-span">Gradle 项目在 build 时，项目内只有 <span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">build.gradle </span>会自动运行，<span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">自定义</span>的 <span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">*.gradle</span> 需要引入到 <span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">build.gradle</span> 才会执行。</span></div><div><span data-wiz-span="data-wiz-span"><br></span></div><div style="text-align: left;"><span data-wiz-span="data-wiz-span">Gradle 项目根目录下的 </span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">build.gradle </span><span data-wiz-span="data-wiz-span">是全局的，下面的各个模块的 </span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">build.gradle</span><span data-wiz-span="data-wiz-span"> 是局部的，局部的覆盖全局的变量。</span></div><div style="text-align: left;"><span data-wiz-span="data-wiz-span"><br></span></div><div style="text-align: left;"><span data-wiz-span="data-wiz-span">Gradle 项目在 build 时，会先去 </span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">%GRADLE_USER_HOM%</span><span data-wiz-span="data-wiz-span">（默认%User_Home%/.gradle/） 目录里找&nbsp;</span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">init.gradle</span><span data-wiz-span="data-wiz-span"> （非 build.gradle）来执行。这是用于用户做自定义全局配置的一个设计。</span></div><div style="text-align: left;"><span data-wiz-span="data-wiz-span"><br></span></div><div style="text-align: left;"><span data-wiz-span="data-wiz-span">Gradle 项目执行项目外部的 </span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">init.gradle</span><span data-wiz-span="data-wiz-span"> 的顺序 ：</span></div><blockquote><div><span data-wiz-span="data-wiz-span">1.&nbsp;</span><span data-wiz-span="data-wiz-span" style="color:rgb(255, 104, 32)">%GRADLE_USER_HOM%</span><span data-wiz-span="data-wiz-span"> 目录</span></div><div style="text-align: left;"><span data-wiz-span="data-wiz-span">2. </span><span data-wiz-span="data-wiz-span" style="color: rgb(255, 104, 32);">%GRADLE_HOME%/init.d</span><span data-wiz-span="data-wiz-span"> 目录</span></div></blockquote><blockquote><blockquote><div><div><div><span data-wiz-span="data-wiz-span" style="background-color: rgb(0, 147, 0); color: rgb(255, 255, 255);">Tips：</span></div></div></div></blockquote><blockquote><blockquote><div><div><div><span data-wiz-span="data-wiz-span" style="background-color: rgb(0, 147, 0); color: rgb(255, 255, 255);">这里的 %GRADLE_HOME% 指的是 Gradle 项目所使用的 Gradle，具体路径视项目实际情况而定。&nbsp;</span></div></div></div></blockquote></blockquote></blockquote><div><div><div><div><br><br></div></div></div></div><blockquote><div><br></div><div><div><div><br></div></div></div></blockquote><div><div><div><div><div><div><b><span data-wiz-span="data-wiz-span" style="font-size:1.333rem;">2、如何添加自定义的 .gradle 脚本：</span></b></div></div></div></div></div></div><blockquote><div><div><div><div><div><div><div><div><div><span><br></span></div></div></div></div></div></div></div></div></div></blockquote><div><div><div><div><div><div><div><div><div><span>自定义的 .gradle 脚本如果放在 init.d 目录之内，那么名字可以随便取，</span><span>init.d 目录有 2 处地方，如下，执行的优先级随排列顺序：</span></div></div></div></div></div></div></div></div></div><blockquote><blockquote><div><div><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(127, 127, 127);color:rgb(255, 255, 255);">1. %GRADLE_USER_HOME%/init.d</span></div></div></div><div><div><div><span data-wiz-span="data-wiz-span" style="background-color:rgb(127, 127, 127);color:rgb(255, 255, 255);">2. %GRADLE_HOME%/.gradle/init.d</span></div></div></div></blockquote></blockquote><div><div><div><div><div><div><br></div><div>如果自定义的 .gradle 脚本放在 init.d 目录之外，这时候可以通过命令指令它，把它添加到 init script 列表里。</div></div></div><div><br></div><div><div><div><span>如果自定义的 .gradle 脚本放在 init.d 目录之外，又不想用命令添加它，就得用固定的命名放在固定的位置，如下：</span></div></div></div></div></div></div><blockquote><blockquote><div><div><div><span><div><div><div><span data-wiz-span="data-wiz-span" style="color:rgb(255, 255, 255);background-color:rgb(127, 127, 127);">1. %GRADLE_USER_HOME%/init.gradle</span></div></div></div></span></div></div></div></blockquote><div><div><div><div><div><br></div></div></div></div></div><div><br></div><div><br></div><div><br></div><div><br></div></blockquote><div><div><div><div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.333rem;">3、Ref：</span></b></div></div></div></div></div><blockquote></blockquote><blockquote><blockquote></blockquote></blockquote><blockquote><div><div><a href="https://juejin.cn/post/6987538596920033310" style="text-decoration-skip-ink:none;">《掘金 - Android Gradle最佳实践系列2：自定义Build配置》</a></div></div><div><div><div><div><div><a href="https://www.cnblogs.com/langtianya/p/5220212.html" style="text-decoration-skip-ink:none;">《cnblogs - gradle init.gradle的文件配置 使用》</a></div></div></div></div></div><blockquote><div><div><div><div><div><div><blockquote><div><div><br></div></div></blockquote></div></div></div></div></div></div></blockquote></blockquote><blockquote><blockquote></blockquote></blockquote><blockquote><div><div><div><div><div><br></div></div></div></div></div><div><br></div></blockquote><div><div><div><div><div><br></div></div></div></div><div><div><div><div><br></div></div></div></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h2>疑问：</h2><hr><div><br></div><div><b>Q：是否需要为 Cordova&nbsp;配置 gradle 的镜像源（远程仓库）？</b></div><div><span>详情：是否需要为 Cordova 打包工具</span><span>配置 gradle 的镜像源（远程仓库），如</span><span>指向阿里云的，不要指向 google 和 jcenter 的？</span></div><div><span><br></span></div><div><span><br></span></div><div><div><div><b>Q：是否需要为 Cordova 下载符合打包工具的版本的 platform 和 tools 包？</b></div></div><blockquote><div><div>详情：<span>是否需要为 Cordova </span><span>打包工具</span><span>下载兼容该工具的版本的</span><span><span>&nbsp;</span>platform 和 tools<span>&nbsp;</span></span><span>？</span>如 Android SDK Platform 27 和 Android SDK Build-Tools 26？</div></div></blockquote></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><div><div><br><br></div></div></div><div><br></div><div><h2 style="font-size:1.5rem;">开发问题记录：</h2><hr></div><div><br></div><div>笔记《<a href="/views/技术总结/前端技术/为知笔记/App_打包_开发问题记录.html" style="text-decoration-skip-ink:none;">App_打包_开发问题记录</a>》</div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div>&nbsp;</div><div>&nbsp;</div><div><br></div><div>&nbsp;</div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div><h1><span>相关内容：</span></h1><div><hr></div><div><span><br></span></div><h2><span>易错点：</span></h2><div><span style="font-size:0.938rem" data-wiz-span="data-wiz-span"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;"><br></span></b></span></div><div><span style="font-size:0.938rem" data-wiz-span="data-wiz-span"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">Q：</span><span data-wiz-span="data-wiz-span" style="font-size: 1.167rem;">相对路径一定就配置相对路径的那个文件吗？</span></b></span></div><div style="text-align: left;"><b><span data-wiz-span="data-wiz-span" style="font-size: 1.5rem;">A：</span></b>这要看你设置的相对路径这个“字符串”被哪个文件拿去使用，并不是说在 A 文件里设置了一个相对路径，在 B 文件里使用这个路径也还是相对于 A 文件。</div><blockquote><div style="text-align: left;">你要明白相对路径的本质，它是一段字符串，在没有转化为绝对路径前，谁用就相对与谁。</div><div style="text-align: left;"><br></div><div><b>Ref：</b></div></blockquote><blockquote><blockquote><div><a href="https://segmentfault.com/a/1190000022784598">《segmentfault - js 相对路径与绝对路径--学会你就无敌了！》</a></div></blockquote></blockquote><div><br></div><div><br></div><div><br></div><blockquote><br></blockquote></div><h2>基础知识：</h2><div><blockquote><br></blockquote></div><div><span style="">笔记《</span><a href="/views/技术总结/前端技术/为知笔记/Gradle_基础知识（index）.html" style="text-decoration-skip-ink: none;">Gradle_基础知识（index）</a><span style="">》之</span></div><blockquote style=""><div><span style=""><u>《build.gradle 的概念》</u></span></div><div><span style=""><u>《jCenter 的概念》</u></span></div></blockquote><div><blockquote><br></blockquote><blockquote><br></blockquote></div>

  <script type="text/javascript">
    /**
    * 让 iframe 中的 <a> 打开新页面
    */
    let aDoms = document.getElementsByTagName("a")
    for ( let aDom of aDoms ) {
      let oldHref = aDom.href;
      let newHref = "javascript:window.open('" + oldHref + "')";
      // console.info("aDom", aDom);
      aDom.href = newHref;
    }
  </script>

</body></html>